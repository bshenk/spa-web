webpackJsonp([1],{0:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),r=(o(i),n(17)),a=o(r),s=n(209),l=(o(s),n(167)),u=o(l);a.default.render((0,u.default)(),document.querySelector(".app"))},35:function(t,e,n){"use strict";function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){switch(void 0===t&&(t=T),e.type){case S:return t.set("current",e.payload);case L:return t.set("categories",e.payload);case O:return t.set("preview",e.payload);case D:return t.set("preview",T.get("preview"));case k:var n=t;return n=n.setIn(["previewRequest","dateRange"],e.payload.dateRange);case x:var o=t;return o=null===e.key?o.set(e.requestType,e.payload):o.setIn([e.requestType,e.key],e.payload);case P.RESET_SCENARIO:var i=t;return i=i.set("previewRequest",T.get("previewRequest"));case E:return t.set(e.param,e.payload);default:return t}}function a(){return{type:b.MAP_LOADING}}function s(){return{type:b.MAP_LOADED}}function l(t){return{type:S,payload:t}}function u(t,e,n){return function(e){function o(){(0,w.default)(t).then(function(t){console.log(t.data),e({type:S,payload:t.data}),e({type:b.MAP_LOADED})}).catch(function(t){e({type:b.MAP_LOADED}),n&&n(t)})}e({type:b.MAP_LOADING}),setTimeout(o,500)}}function p(t,e){return function(n){(0,w.default)(t).then(function(t){var e=t.data,o=(e.COUNTRY,e.DATE.map(function(t){return t.yr})),i=Math.min.apply(null,o),r=Math.max.apply(null,o),a=e.DATE.filter(function(t){return t.yr===i}).map(function(t){return t.mn}),s=e.DATE.filter(function(t){return t.yr===r}).map(function(t){return t.mn}),l=Math.min.apply(null,a),u=Math.max.apply(null,s);n({type:k,payload:{dateRange:[[i,l],[r,u]],minYear:i,maxYear:r}}),n({type:L,payload:t.data});var p=t.data,c={},d={},h={},f={},m={};p.COUNTRY.forEach(function(t){c[t.code]=t.name}),p.ACTOR1.forEach(function(t){d[t.code]=t.type}),p.ACTOR2.forEach(function(t){h[t.code]=t.type}),p.EVENTTYPE.forEach(function(t){f[t.code]=t.type}),p.INTERACTION.forEach(function(t){m[t.code]=t.type}),n({type:P.UPDATE_SCENARIO,key:"countryOptions",payload:c}),n({type:P.UPDATE_SCENARIO,key:"actor1Options",payload:d}),n({type:P.UPDATE_SCENARIO,key:"actor2Options",payload:h}),n({type:P.UPDATE_SCENARIO,key:"eventOptions",payload:f}),n({type:P.UPDATE_SCENARIO,key:"interactionOptions",payload:m})}).catch(function(t){e(t)})}}function c(t,e,n){return console.log(t.data),function(o){(0,w.default)(t).then(function(t){console.log(t.data),o({type:O,payload:t.data}),e&&e()}).catch(function(t){n&&n(t)})}}function d(t){return{type:C,payload:t}}function h(t,e,n){return{type:x,requestType:t,key:e,payload:n}}function f(t,e){return{type:E,param:t,payload:e}}function m(){return{type:D}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,e.mapLoading=a,e.mapLoaded=s,e.storeCurrentData=l,e.fetchCurrentData=u,e.fetchCategoryData=p,e.fetchEventPreview=c,e.updateRoot=d,e.updateRequest=h,e.updateParam=f,e.resetPreview=m;var y=n(84),_=i(y),g=n(345),v=(o(g),n(46)),w=i(v),b=n(48),P=n(58),S="spa/data/FETCH_CURRENT_DATA";e.FETCH_CURRENT_DATA=S;var L="spa/data/FETCH_CATEGORY_DATA";e.FETCH_CATEGORY_DATA=L;var O="spa/data/FETCH_EVENT_PREVIEW";e.FETCH_EVENT_PREVIEW=O;var k="spa/data/SET_DEFAULT_SCENARIO";e.SET_DEFAULT_SCENARIO=k;var x="spa/data/UPDATE_REQUEST";e.UPDATE_REQUEST=x;var C="spa/data/UPDATE_ROOT";e.UPDATE_ROOT=C;var D="spa/data/RESET_EVENT_PREVIEW";e.RESET_EVENT_PREVIEW=D;var E="spa/data/UPDATE_PARAM";e.UPDATE_PARAM=E;var T=(JSON.parse(localStorage.getItem("currentRequest")),_.default.Map({current:_.default.Map({}),preview:_.default.Map({}),categories:_.default.Map({}),previewRequest:_.default.Map({ignoreDate:!1,startEndNowDates:[void 0,void 0,void 0],ignoreFatalities:!1,fatalities:[],allowedCountryCodes:[],allowedEventTypeCodes:[],allowedActor1TypeCodes:[],allowedActor2TypeCodes:[],allowedInteractionTypeCodes:[],withinGeometry:{}}),scenarioInfo:void 0,swarmState:void 0}))},47:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){switch(void 0===t&&(t=h),e.type){case u:var n=t;return e.subkey?e.subkey?n=n.setIn([e.key,e.subkey],e.payload):e.subsubkey&&(n=n.setIn([e.key,e.subkey,e.subsubkey],e.payload)):n=n.set(e.key,e.payload),n;case p:var o=t;return o=o.set(e.key,e.payload),e.convert?localStorage.setItem(e.key,JSON.stringify(e.payload)):localStorage.setItem(e.key,e.payload),o;default:return t}}function r(t,e,n,o){return{type:u,payload:t,key:e,subkey:n,subsubkey:o}}function a(t,e,n){return{type:p,key:t,payload:e,convert:n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,e.updateConfigStore=r,e.updateConfigStoreAndStorage=a;var s=n(84),l=o(s),u="spa/config/UPDATE_CONFIG";e.UPDATE_CONFIG=u;var p="spa/config/UPDATE_CONFIG_STORE_AND_STORAGE";e.UPDATE_CONFIG_STORE_AND_STORAGE=p;var c=JSON.parse(localStorage.getItem("sendOnly")),d=void 0;d=localStorage.getItem("drawGrids")?"true"==localStorage.getItem("drawGrids"):!0;var h=l.default.Map({expanded:!0,editorActive:!1,streaming:!1,running:!1,connected:!1,streamRate:localStorage.getItem("streamRate")||10,source:localStorage.getItem("source")||null,sourceOptions:[],dataPort:localStorage.getItem("dataPort")||null,cmdPort:localStorage.getItem("cmdPort")||null,authUser:localStorage.getItem("authUser")||"AXON",authPassword:localStorage.getItem("authPassword")||"Swarm4it!",username:localStorage.getItem("username")||"userName",email:localStorage.getItem("email")||"user@gmail.com",tileServer:localStorage.getItem("tileServer")||"http://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",fieldCoverage:localStorage.getItem("fieldCoverage")||.1,useWS:JSON.parse(localStorage.getItem("useWS"))||!1,preferredAttackDistance:525,importanceOfRoadsOrigin:.6,importanceOfRoadsERF:.6,drawGrids:d,sendOnly:c||{events:{past:null,future:null},fields:{Origin:"AllEvents",NaiveRisk:"AllEvents",AdvancedRisk:"AllEvents"}}})},48:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){switch(void 0===t&&(t=z),e.type){case k:var n=t;return n=n.set(e.key,e.payload),localStorage.setItem(e.key,e.payload),n;case g:return t.set("map",e.payload);case _:return t.set("loaded",!0);case y:return t.set("loaded",!1);case v:var o=t;return o=o.setIn([e.nodeType,"layers"],e.payload.layers),e.payload.area?o=o.setIn([e.nodeType,"area"],e.payload.area):e.payload.layerGroup&&(o=o.setIn([e.nodeType,"layerGroup"],e.payload.layerGroup)),o;case b:var i=t;return localStorage.setItem(e.nodeType+"-visible",!1),console.log(localStorage.getItem(e.nodeType+"-visible")),i=i.setIn([e.nodeType,"visible"],!1);case w:var r=t;return localStorage.setItem(e.nodeType+"-visible",!0),console.log(localStorage.getItem(e.nodeType+"-visible")),r=r.setIn([e.nodeType,"visible"],!0);case P:var a=t;return a=a.setIn([e.nodeType,"advMatching"],e.payload);case S:var s=t;return s=s.setIn([e.nodeType,"naiveMatching"],e.payload);case L:var l=t;return l=l.set("status",e.payload);case O:var u=t;return u=u.set(e.key,e.payload);default:return t}}function r(t){return{type:g,payload:t}}function a(){return function(t){t({type:_})}}function s(t,e){return{type:v,nodeType:t,payload:e}}function l(t){return{type:w,nodeType:t}}function u(t){return{type:b,nodeType:t}}function p(t){return{type:L,payload:t}}function c(t,e){return{type:O,key:t,payload:e}}function d(t,e){return{type:k,key:t,payload:e}}function h(t,e,n){return"NaiveRisk"===n?{type:S,nodeType:t,payload:e}:"AdvancedRisk"===n?{type:P,nodeType:t,payload:e}:void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,e.addMap=r,e.mapLoaded=a,e.addMapData=s,e.showMapData=l,e.hideMapData=u,e.updateStatus=p,e.updateMapStore=c,e.updateMapStoreAndStorage=d,e.setMatchingPct=h;var f=n(84),m=o(f),y="spa/map/MAP_LOADING";e.MAP_LOADING=y;var _="spa/map/MAP_LOADED";e.MAP_LOADED=_;var g="spa/map/ADD_MAP";e.ADD_MAP=g;var v="spa/map/ADD_MAPDATA";e.ADD_MAPDATA=v;var w="spa/map/SHOW_MAPDATA";e.SHOW_MAPDATA=w;var b="spa/map/HIDE_MAPDATA";e.HIDE_MAPDATA=b;var P="spa/map/SET_ADV_MATCHING";e.SET_ADV_MATCHING=P;var S="spa/map/SET_NAIVE_MATCHING";e.SET_NAIVE_MATCHING=S;var L="spa/map/UPDATE_STATUS";e.UPDATE_STATUS=L;var O="spa/map/UPDATE_MAP_STORE";e.UPDATE_MAP_STORE=O;var k="spa/map/UPDATE_MAP_STORE_AND_STORAGE";e.UPDATE_MAP_STORE_AND_STORAGE=k;var x=void 0,C=void 0,D=void 0,E=void 0,T=void 0,M=void 0,A=void 0,$=void 0,N=void 0,R=void 0,I=void 0,U=void 0,j=void 0;x=localStorage.getItem("originHeatmapVisible")?JSON.parse(localStorage.getItem("originHeatmapVisible")):!1,C=localStorage.getItem("originVisible")?JSON.parse(localStorage.getItem("originVisible")):!0,D=localStorage.getItem("sotaHeatmapVisible")?JSON.parse(localStorage.getItem("sotaHeatmapVisible")):!1,E=localStorage.getItem("sotaVisible")?JSON.parse(localStorage.getItem("sotaVisible")):!1,T=localStorage.getItem("erfHeatmapVisible")?JSON.parse(localStorage.getItem("erfHeatmapVisible")):!0,M=localStorage.getItem("erfVisible")?JSON.parse(localStorage.getItem("erfVisible")):!1,A=localStorage.getItem("roadsVisible")?JSON.parse(localStorage.getItem("roadsVisible")):!1,$=localStorage.getItem("pastVisible")?JSON.parse(localStorage.getItem("pastVisible")):!0,N=localStorage.getItem("pastClustering")?JSON.parse(localStorage.getItem("pastClustering")):!0,R=localStorage.getItem("pastPreviewClustering")?JSON.parse(localStorage.getItem("pastPreviewClustering")):!0,I=localStorage.getItem("futureVisible")?JSON.parse(localStorage.getItem("futureVisible")):!0,U=localStorage.getItem("futureClustering")?JSON.parse(localStorage.getItem("futureClustering")):!0,j=localStorage.getItem("futurePreviewClustering")?JSON.parse(localStorage.getItem("futurePreviewClustering")):!0;var z=m.default.Map({loaded:!0,map:null,countriesLayer:{},districtsLayer:{},infoActive:!1,originHeatmapLayer:null,originLayer:null,originHeatmapVisible:x,originVisible:C,sotaHeatmapLayer:null,sotaLayer:null,sotaHeatmapVisible:D,sotaVisible:E,erfHeatmapLayer:null,erfLayer:null,erfHeatmapVisible:T,erfVisible:M,roadsLayer:null,roadsVisible:A,pastLayer:null,pastPreviewLayer:null,pastVisible:$,pastPreviewVisible:!0,pastClustering:N,pastPreviewClustering:R,pastSotaMatching:0,pastErfMatching:0,futureLayer:null,futurePreviewLayer:null,futureVisible:I,futurePreviewVisible:!0,futureClustering:U,futurePreviewClustering:j,futureSotaMatching:0,futureErfMatching:0})},58:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){switch(void 0===t&&(t=d),e.type){case u.SET_DEFAULT_SCENARIO:var n=t;return n=n.set("minYear",e.payload.minYear),n=n.set("maxYear",e.payload.maxYear);case p:var o=t;return o=o.set(e.key,e.payload);case c:var i=t;return i=i.set("selectedCountryObjs",[]),i=i.set("selectedEventObjs",[]),i=i.set("selectedActor1Objs",[]),i=i.set("selectedActor2Objs",[]),i=i.set("selectedInteractionObjs",[]);default:return t}}function r(t,e){return{type:p,key:t,payload:e}}function a(){return{type:c}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i,e.updateScenario=r,e.resetScenario=a;var s=n(84),l=o(s),u=n(35),p="spa/scenario/UPDATE_SCENARIO";e.UPDATE_SCENARIO=p;var c="spa/scenario/RESET_SCENARIO";e.RESET_SCENARIO=c;var d=l.default.Map({minYear:1997,maxYear:2016,active:!1,step:0,selectedCountryObjs:[],selectedEventObjs:[],selectedActor1Objs:[],selectedActor2Objs:[],selectedInteractionObjs:[],countryOptions:[],actor1Options:[],actor2Options:[],eventOptions:[],interactionOptions:[]})},108:function(t,e,n){"use strict";function o(t){var e=s.store.getState(),n=e.backend.get("ws");n.send(t),console.log(t)}function i(t){switch(t){case 1:return"Jan";case 2:return"Feb";case 3:return"Mar";case 4:return"Apr";case 5:return"May";case 6:return"Jun";case 7:return"Jul";case 8:return"Aug";case 9:return"Sep";case 10:return"Oct";case 11:return"Nov";case 12:return"Dec"}}function r(t){return("0"+t).slice(-2)}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}Object.defineProperty(e,"__esModule",{value:!0}),e.doSend=o,e.monthNumToString=i,e.convToDouble=r,e.capitalize=a;var s=n(167)},163:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(233)),d=o(c),h=n(234),f=o(h),m={$$typeof:s,type:d.default,key:null,ref:null,props:i(d.default.defaultProps,{}),_owner:null},y={$$typeof:s,type:f.default,key:null,ref:null,props:i(f.default.defaultProps,{}),_owner:null},_=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){var t={},e=null,n=this.props,o=n.className,i=n.number,r=n.title,a=n.children,l=n.active,u=n.nextStep,p=n.step,c=n.currentStep,d=(n.previewEvents,n.resetEvents,n.countries);e=this.props.editOnClick,t=this.props.numberStyle;var h=null;return 4!==p&&(h={$$typeof:s,type:"div",key:null,ref:null,props:{children:["Next",m],className:c>p||0===Object.keys(d).length?"disabled":null,onClick:u},_owner:null}),{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:"h1",key:null,ref:null,props:{children:i,style:t},_owner:null},className:"number-bg"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:"h2",key:null,ref:null,props:{children:r},_owner:null},className:"title-bg"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:a,className:"content"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:"span",key:null,ref:null,props:{children:["function"==typeof e?{$$typeof:s,type:"div",key:null,ref:null,props:{children:["Edit ",y],onClick:e},_owner:null}:null,h],style:{"float":"right"}},_owner:null},className:"footer"},_owner:null}],className:l?"editor-section "+o:"editor-section "+o+" hide-off-screen"},_owner:null}}}]),e}(p.Component);e.default=_,t.exports=e.default},164:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},u=n(1);o(u);n(412);var p={$$typeof:a,type:"div",key:null,ref:null,props:{className:"loading-bar"},_owner:null},c=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){return{$$typeof:a,type:"div",key:null,ref:null,props:{children:p,id:"loading",className:this.props.loaded?"loaded":"notLoaded"},_owner:null}}}]),e}(u.Component);e.default=c,t.exports=e.default},165:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){var e=t.map,n=t.data,o=t.config;return{map:e,data:n,config:o}}function u(t){return(0,y.bindActionCreators)({updateMapStore:_.updateMapStore,updateMapStoreAndStorage:_.updateMapStoreAndStorage,updateRequest:g.updateRequest,updateConfigStoreAndStorage:v.updateConfigStoreAndStorage},t)}Object.defineProperty(e,"__esModule",{value:!0});var p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},f=n(1);o(f);n(414);var m=n(28),y=n(27),_=n(48),g=n(35),v=n(47),w=n(52),b=(o(w),n(73)),P=o(b),S={$$typeof:p,type:P.default,key:null,ref:null,props:i(P.default.defaultProps,{"class":"react-tooltip"}),_owner:null},O={$$typeof:p,type:"br",key:null,ref:null,props:{},_owner:null},k=function(t){function e(t){var n=this;a(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.toggleVisibility=function(t,e){var o=t+"Visible";e&&(o=t+"HeatmapVisible");var i=t+"Layer";e&&(i=t+"HeatmapLayer");var r=n.props.map.get(o),a=n.props.map.get(i);r?(n.props.updateMapStoreAndStorage(o,!1),a&&window.map.removeLayer(a),console.log("AXONSPA: "+o+" - false")):(n.props.updateMapStoreAndStorage(o,!0),a&&window.map.addLayer(n.props.map.get(i)),console.log("AXONSPA: "+o+" - true"))},this.toggleClustering=function(t){var e=t+"Clustering",o=n.props.map.get(e);o?n.props.updateMapStoreAndStorage(e,!1):n.props.updateMapStoreAndStorage(e,!0)},this.toggleShowWithin=function(t,e,o){var i=""+t+e+"Matching",a=""+t+e+"FilteredLayer",s=0,l=void 0,u=window.map,p=n.props.map.get(t+"Layer"),c=p.getLayers().length,d=n.props.data.get("current").fields[o].data,h=n.props.map.get(t+"Clustering");if(n.state[a])console.log(a+" exists"),u.removeLayer(n.state[a]),n.setState(r({},a,null)),n.props.updateMapStore(i,0),u.addLayer(p);else{u.removeLayer(p),l=h?L.markerClusterGroup({iconCreateFunction:function(e){return L.divIcon({html:'<span class="cluster-text">'+e.getChildCount()+"</span>",className:"cluster "+t+"-marker"})}}):L.layerGroup(),p.eachLayer(function(t){t.options.CELL_ID in d&&(s++,l.addLayer(t))}),u.addLayer(l);var f=s/c;n.props.updateMapStore(i,f),n.setState(r({},a,l))}},this.toggleSendOnly=function(t,e){e in n.state.sendOnly[t]?n.removeFromSendOnly(t,e):n.addToSendOnly(t,e),n.setState(c({},n.state,{sendOnly:n.props.config.get("sendOnly")}))},this.addToSendOnly=function(t,e){var o=n.state.sendOnly;"events"===t?o[t]=c({},o[t],r({},e,null)):"fields"===t&&"GeoData"===e?o[t]=c({},o[t],r({},e,"Roads")):"fields"===t&&(o[t]=c({},o[t],r({},e,"AllEvents"))),n.props.updateConfigStoreAndStorage("sendOnly",o,!0)},this.removeFromSendOnly=function(t,e){var o=n.state.sendOnly;delete o[t][e],n.props.updateConfigStoreAndStorage("sendOnly",o,!0)},this.state={pastSotaFilteredLayer:null,pastErfFilteredLayer:null,futureSotaFilteredLayer:null,futureErfFilteredLayer:null,sendOnly:this.props.config.get("sendOnly")}}return s(e,t),d(e,[{key:"render",value:function(){var t=this,e=0,n=0,o=this.props.data.get("swarmState");o&&(e=o.numPastEvents,n=o.numFutureEvents);var i=[{key:"past",category:"events",title:"Past Events",oldKey:"past",count:e},{key:"future",category:"events",title:"Future Events",oldKey:"future",count:n},{key:"origin",category:"fields",title:"Origin",oldKey:"Origin"},{key:"erf",category:"fields",title:"Risk (ERF)",oldKey:"AdvancedRisk"},{key:"sota",category:"fields",title:"Risk (SotA)",oldKey:"NaiveRisk"},{key:"roads",category:"fields",title:"Roads",oldKey:"GeoData"},{key:"pastPreview",category:"events",title:"Past Preview"},{key:"futurePreview",category:"events",title:"Future Preview"}],r=i.map(function(e){var n=!1;"fields"===e.category&&"roads"!==e.key&&(n=!0);var o=!1;(e.oldKey in t.state.sendOnly.fields||e.oldKey in t.state.sendOnly.events)&&(o=!0);var i=!1;"past"!==e.key&&"future"!==e.key||(i=!0);var r=t.props.data.get("current"),a=!1;"events"===e.category&&(a=!0);var s=!1;i&&(s=!0);var l=!1;void 0===r.events&&void 0===r.fields||(l=!0);var u=!1;i&&l&&(u=r.events[e.key].count>0);var c=!0;"pastPreview"!==e.key&&"futurePreview"!==e.key||(c=!1);var d=t.props.map.get(e.key+"Visible"),h=t.props.map.get(e.key+"HeatmapVisible"),f=t.props.map.get(e.key+"Clustering"),m=t.props.map.get(e.key+"ErfMatching"),y=m>0,_=t.props.map.get(e.key+"SotaMatching"),g=_>0;return{$$typeof:p,type:"div",key:e.key,ref:null,props:{children:[{$$typeof:p,type:"div",key:null,ref:null,props:{className:"top-banner "+e.key},_owner:null},{$$typeof:p,type:"div",key:null,ref:null,props:{children:[S,c?{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-database 1x small "+(o?"active":""),onClick:function(){return t.toggleSendOnly(e.category,e.oldKey)},"data-tip":"Retrieve From Swarm"},_owner:null}:null,{$$typeof:p,type:"p",key:null,ref:null,props:{children:e.title,style:{height:"15px"},"data-content":e.count,"data-color":"red",className:i&&l?"type-section-event-title":""},_owner:null},O,{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-eye 1x "+(d?"active":""),onClick:function(){return t.toggleVisibility(e.key,!1)},"data-tip":d?"Hide Layer":"Show Layer"},_owner:null},n?{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-fire 1x "+(h?"active":""),onClick:function(){return t.toggleVisibility(e.key,!0)},"data-tip":h?"Hide Heatmap":"Show Heatmap"},_owner:null}:null,a?{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-dot-circle-o 1x "+(f?"active":""),onClick:function(){return t.toggleClustering(e.key)},"data-tip":f?"Disable Clustering":"Enable Clustering"},_owner:null}:null,s?{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-thumbs-down 1x "+(g?"active":"")+" "+(u?"":"disabled"),onClick:function(){return t.toggleShowWithin(e.key,"Sota","NaiveRisk")},"data-tip":g?"Turn off SotA Filtering":"Show Within SotA Risk"},_owner:null}:null," ",s&&g?{$$typeof:p,type:"div",key:null,ref:null,props:{children:{$$typeof:p,type:"p",key:null,ref:null,props:{children:[(100*_).toFixed(0),"%"]},_owner:null},className:"pct"},_owner:null}:null,s?{$$typeof:p,type:"i",key:null,ref:null,props:{className:"fa fa-thumbs-up 1x "+(y?"active":"")+" "+(u?"":"disabled"),onClick:function(){return t.toggleShowWithin(e.key,"Erf","AdvancedRisk")},"data-tip":y?"Turn off ERF Filtering":"Show Within ERF Risk"},_owner:null}:null," ",s&&y?{$$typeof:p,type:"div",key:null,ref:null,props:{children:{$$typeof:p,type:"p",key:null,ref:null,props:{children:[(100*m).toFixed(0),"%"]},_owner:null},className:"pct"},_owner:null}:null],className:"type-section-content"},_owner:null}],className:"type-section"},_owner:null}});return{$$typeof:p,type:"div",key:null,ref:null,props:{children:r,className:"key"},_owner:null}}}]),e}(f.Component);e.default=(0,m.connect)(l,u)(k),t.exports=e.default},166:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.data;return{data:e}}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1);o(p);n(417);var c=n(28),d=(n(55),{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:"h5",key:null,ref:null,props:{children:"Not Connected",className:"sub"},_owner:null},className:"swarm-section"},_owner:null}),h={$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:"i",key:null,ref:null,props:{className:"fa fa-bug 1x"},_owner:null},className:"swarm-title"},_owner:null},f=function(t){function e(){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),l(e,[{key:"render",value:function(){var t=this.props.data.get("swarmState"),e=[];if(t){for(var n in t.threadCycles)if(n.includes("EA_")){var o="";"EA_NaiveRiskGhostBehavior"===n&&(o="SotA Risk Agents"),"EA_AdvancedRiskGhostBehavior"===n&&(o="ERF Risk Agents"),"EA_OriginGhostBehavior"===n&&(o="Origin Agents"),e.push({$$typeof:s,type:"div",key:n,ref:null,props:{children:[{$$typeof:s,type:"h5",key:null,ref:null,props:{children:o,className:"sub"},_owner:null},{$$typeof:s,type:"p",key:null,ref:null,props:{children:[t.threadCycles[n]," cycles"]},_owner:null}],className:"swarm-section"},_owner:null})}}else e=d;return{$$typeof:s,type:"div",key:null,ref:null,props:{children:[h,{$$typeof:s,type:"div",key:null,ref:null,props:{children:e,className:"swarm-content"},_owner:null}],className:"swarm-container"},_owner:null}}}]),e}(p.Component);e.default=(0,c.connect)(a)(f),t.exports=e.default},167:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(){return C}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.default=r;var s=n(1),l=(o(s),n(17)),u=(o(l),n(28)),p=n(27),c=n(55),d=n(247),h=n(1321),f=o(h),m=n(349),y=o(m),_=n(323),g=o(_),v=n(166),w=o(v),b=n(344),P=o(b),S=n(342),L=o(S),O=(0,p.compose)((0,p.applyMiddleware)(f.default),window.devToolsExtension?window.devToolsExtension():function(t){return t})(p.createStore),k=O(y.default);e.store=k;var x=(0,d.syncHistoryWithStore)(c.hashHistory,k),C={$$typeof:a,type:u.Provider,key:null,ref:null,props:i(u.Provider.defaultProps,{children:{$$typeof:a,type:c.Router,key:null,ref:null,props:i(c.Router.defaultProps,{children:[{$$typeof:a,type:c.Route,key:null,ref:null,props:i(c.Route.defaultProps,{children:[{$$typeof:a,type:c.Route,key:null,ref:null,props:i(c.Route.defaultProps,{path:"settings",component:P.default}),_owner:null},{$$typeof:a,type:c.Route,key:null,ref:null,props:i(c.Route.defaultProps,{path:"swarm",component:w.default}),_owner:null}],path:"/",component:g.default}),_owner:null},{$$typeof:a,type:c.Route,key:null,ref:null,props:i(c.Route.defaultProps,{path:"*",component:L.default}),_owner:null}],history:x}),_owner:null},store:k}),_owner:null}},323:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=t.map,n=t.config,o=t.routing,i=t.data,r=t.scenario;return{map:e,config:n,routing:o,data:i,scenario:r}}function l(t){return(0,P.bindActionCreators)({updateConfigStore:S.updateConfigStore,updateConfigStoreAndStorage:S.updateConfigStoreAndStorage,updateScenario:O.updateScenario,fetchCategoryData:L.fetchCategoryData,mapLoaded:k.mapLoaded,addMapData:k.addMapData,hideMapData:k.hideMapData,showMapData:k.showMapData,setMatchingPct:k.setMatchingPct,addMap:k.addMap,fetchEventPreview:L.fetchEventPreview,updateRequest:L.updateRequest,fetchCurrentData:L.fetchCurrentData,updateStatus:k.updateStatus,updateMapStore:k.updateMapStore,updateMapStoreAndStorage:k.updateMapStoreAndStorage,updateParam:L.updateParam,storeCurrentData:L.storeCurrentData},t)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),d=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},h=n(1),f=o(h);n(403),n(405),n(402),n(404);var m=n(346),y=(n(108),n(46)),_=o(y),g=n(52),v=(o(g),n(209)),w=o(v),b=n(28),P=n(27),S=n(47),L=n(35),O=n(58),k=n(48),x=n(326),C=o(x),D=n(340),E=o(D),T=n(164),M=(o(T),n(55)),A=n(325),$=o(A),N=n(1195),R=o(N),I=function(t){function e(t){var n=this;r(this,e),d(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.sendMessage=function(t){n.ws.send(t)},this.handleMessage=function(t){var e=JSON.parse(t);console.log(e);var o=e.hasOwnProperty("threadCycles"),i=e.hasOwnProperty("fields")||e.hasOwnProperty("events");i&&n.props.storeCurrentData(e),o&&(n.props.updateParam("swarmState",e),n.props.updateConfigStore(e.running,"running"))},this.handleOpen=function(){console.log("AXONSPA: New WebSocket connection opened."),n.props.updateConfigStore(!0,"connected")},this.handleClose=function(){console.log("AXONSPA: WebSocket connection closed."),
n.props.updateConfigStore(!1,"connected")},this.toggleExpand=function(){n.props.config.get("expanded")?n.props.updateConfigStore(!1,"expanded"):n.props.updateConfigStore(!0,"expanded")},this.ws=null,this.state={timer:0}}return a(e,t),c(e,[{key:"mountWS",value:function(t){t&&!this.ws&&(this.ws=t.state.ws)}},{key:"componentDidMount",value:function(){var t=this;window.Perf=w.default,w.default.start(),this._notificationSystem=this.refs.notificationSystem;var e=void 0,n=this.props.config.get("source"),o=this.props.config.get("dataPort"),i=this.props.config.get("cmdPort");_.default.get("./data/config.json").then(function(e){var r=e.data,a=r.ports,s=r.sources;null===n&&t.props.updateConfigStoreAndStorage("source",s.default),null===o&&t.props.updateConfigStoreAndStorage("dataPort",a.defaultDataPort),null===i&&t.props.updateConfigStoreAndStorage("cmdPort",a.defaultCmdPort)}),e="./data/tempData.json"===n?{url:"./data/categoryData.json",method:"get"}:{url:"http://"+n+":"+o+"/categories",method:"get"},null!==n&&this.props.fetchCategoryData(e);var r={method:"get",url:"http://"+n+":"+i+"/getScenarioState"};"./data/tempData.json"===n&&(r={method:"get",url:"./data/scenarioState.json"}),null===n||this.props.config.get("useWS")||(0,_.default)(r).then(function(e){t.props.config.get("connected")||t.props.updateConfigStore(!0,"connected"),t.props.updateConfigStore(e.data.running,"running"),t.props.updateConfigStore(e.data.processParams.PreferredAttackDistance,"preferredAttackDistance"),t.props.updateConfigStore(e.data.processParams.importanceOfRoadsERF,"importanceOfRoadsERF"),t.props.updateConfigStore(e.data.processParams.importanceOfRoadsOrigin,"importanceOfRoadsOrigin"),t.props.updateParam("swarmState",e.data)}).catch(function(e){t.props.config.get("connected")&&t.props.updateConfigStore(!1,"connected")}),setInterval(function(){t.setState({timer:t.state.timer+1})},15e3)}},{key:"componentDidUpdate",value:function(t,e){var n=this;setTimeout(function(){var e=t.config.get("source"),o=n.props.config.get("source"),i=n.props.config.get("dataPort");if(e!==o&&0===n.props.data.get("categories").size){var r=void 0;r="./data/tempData.json"===o?{url:"./data/categoryData.json",method:"get"}:{url:"http://"+o+":"+i+"/categories",method:"get"},n.props.fetchCategoryData(r,function(t){console.log(t)})}},2e3);var o=this.props.config.get("source"),i=this.props.config.get("cmdPort"),r={method:"get",url:"http://"+o+":"+i+"/getScenarioState"};"./data/tempData.json"===o&&(r={method:"get",url:"./data/scenarioState.json"}),e.timer<this.state.timer&&!this.props.config.get("useWS")&&(0,_.default)(r).then(function(t){n.props.config.get("connected")||n.props.updateConfigStore(!0,"connected"),n.props.updateConfigStore(t.data.running,"running"),"/settings"!==n.props.routing.locationBeforeTransitions.pathname&&(n.props.updateConfigStore(t.data.processParams.PreferredAttackDistance,"preferredAttackDistance"),n.props.updateConfigStore(t.data.processParams.importanceOfRoadsERF,"importanceOfRoadsERF"),n.props.updateConfigStore(t.data.processParams.importanceOfRoadsOrigin,"importanceOfRoadsOrigin")),n.props.updateParam("swarmState",t.data)}).catch(function(t){console.log(t),n.props.config.get("connected")&&n.props.updateConfigStore(!1,"connected")})}},{key:"render",value:function(){var t=this,e=this.props,n=(e.map,e.routing),o=(e.data,e.config,e.children,e.scenario,"/"!==n.locationBeforeTransitions.pathname);return{$$typeof:p,type:"div",key:null,ref:null,props:{children:[f.default.createElement(R.default,{ref:"notificationSystem",style:m.notificationStyle}),f.default.createElement($.default,{url:"ws://localhost:8090",onMessage:function(e){return t.handleMessage(e)},onOpen:function(){return t.handleOpen()},onClose:function(){return t.handleClose()},ref:function(e){return t.mountWS(e)}}),f.default.createElement(C.default,u({},n,{expanded:this.props.config.get("expanded"),toggleExpand:this.toggleExpand,config:this.props.config,updateConfigStore:this.props.updateConfigStore,notifications:this._notificationSystem,sendMessage:this.sendMessage})),{$$typeof:p,type:E.default,key:null,ref:null,props:i(E.default.defaultProps,{notifications:this._notificationSystem,sendMessage:this.sendMessage}),_owner:null},{$$typeof:p,type:M.Link,key:null,ref:null,props:i(M.Link.defaultProps,{className:"route-overlay-bg "+(o?"":"disabled"),to:"/"}),_owner:null},{$$typeof:p,type:"div",key:null,ref:null,props:{children:this.props.children,className:"route-overlay-content "+(o?"":"disabled")},_owner:null}],className:"app-container"},_owner:null}}}]),e}(h.Component);e.default=(0,b.connect)(s,l)(I),t.exports=e.default},324:function(t,e,n){var o,i,r;!function(n,a){i=[],o=a,r="function"==typeof o?o.apply(e,i):o,!(void 0!==r&&(t.exports=r))}(void 0,function(){function t(e,n,o){function i(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}var r={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"};o||(o={});for(var a in r)"undefined"!=typeof o[a]?this[a]=o[a]:this[a]=r[a];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,l=this,u=!1,p=!1,c=document.createElement("div");c.addEventListener("open",function(t){l.onopen(t)}),c.addEventListener("close",function(t){l.onclose(t)}),c.addEventListener("connecting",function(t){l.onconnecting(t)}),c.addEventListener("message",function(t){l.onmessage(t)}),c.addEventListener("error",function(t){l.onerror(t)}),this.addEventListener=c.addEventListener.bind(c),this.removeEventListener=c.removeEventListener.bind(c),this.dispatchEvent=c.dispatchEvent.bind(c),this.open=function(e){if(s=new WebSocket(l.url,n||[]),s.binaryType=this.binaryType,e){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else c.dispatchEvent(i("connecting")),this.reconnectAttempts=0;(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",l.url);var o=s,r=setTimeout(function(){(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",l.url),p=!0,o.close(),p=!1},l.timeoutInterval);s.onopen=function(n){clearTimeout(r),(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onopen",l.url),l.protocol=s.protocol,l.readyState=WebSocket.OPEN,l.reconnectAttempts=0;var o=i("open");o.isReconnect=e,e=!1,c.dispatchEvent(o)},s.onclose=function(n){if(clearTimeout(r),s=null,u)l.readyState=WebSocket.CLOSED,c.dispatchEvent(i("close"));else{l.readyState=WebSocket.CONNECTING;var o=i("connecting");o.code=n.code,o.reason=n.reason,o.wasClean=n.wasClean,c.dispatchEvent(o),e||p||((l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onclose",l.url),c.dispatchEvent(i("close")));var r=l.reconnectInterval*Math.pow(l.reconnectDecay,l.reconnectAttempts);setTimeout(function(){l.reconnectAttempts++,l.open(!0)},r>l.maxReconnectInterval?l.maxReconnectInterval:r)}},s.onmessage=function(e){(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",l.url,e.data);var n=i("message");n.data=e.data,c.dispatchEvent(n)},s.onerror=function(e){(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onerror",l.url,e),c.dispatchEvent(i("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(s)return(l.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","send",l.url,e),s.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(t,e){"undefined"==typeof t&&(t=1e3),u=!0,s&&s.close(t,e)},this.refresh=function(){s&&s.close()}}if("WebSocket"in window)return t.prototype.onopen=function(t){},t.prototype.onclose=function(t){},t.prototype.onconnecting=function(t){},t.prototype.onmessage=function(t){},t.prototype.onerror=function(t){},t.debugAll=!1,t.CONNECTING=WebSocket.CONNECTING,t.OPEN=WebSocket.OPEN,t.CLOSING=WebSocket.CLOSING,t.CLOSED=WebSocket.CLOSED,t})},325:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},u=n(1),p=o(u),c=n(324),d=o(c),h={$$typeof:a,type:"div",key:null,ref:null,props:{},_owner:null},f=function(t){function e(t){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={ws:new d.default(this.props.url,this.props.protocol)}}return r(e,t),s(e,[{key:"setupWebsocket",value:function(){var t=this,e=this.state.ws;e.onopen=function(){t.props.onOpen()},e.onmessage=function(e){t.props.onMessage(e.data)},e.onclose=function(){t.props.onClose()}}},{key:"componentDidMount",value:function(){this.setupWebsocket()}},{key:"componentWillUnmount",value:function(){var t=this.state.ws;t.close()}},{key:"render",value:function(){return h}}]),e}(u.Component);f.propTypes={url:p.default.PropTypes.string.isRequired,onMessage:p.default.PropTypes.func.isRequired,onOpen:p.default.PropTypes.func,onClose:p.default.PropTypes.func,protocol:p.default.PropTypes.string},e.default=f,t.exports=e.default},326:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1);o(p);n(406);var c=n(28),d=(o(c),n(330)),h=o(d),f=n(329),m=(o(f),n(327)),y=o(m),_=n(331),g=o(_),v=n(334),w=o(v),b=n(333),P=(o(b),n(332)),S=o(P),L=n(328),O=o(L),k=n(165),x=o(k),C=n(335),D=o(C),E=n(336),T=o(E),M=n(55),A=n(230),$=(0,A.ContextMenuLayer)("StreamData")(w.default),N={$$typeof:s,type:"h3",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:"AXON",className:"logo-bold"},_owner:null},"SPA"]},_owner:null},R={$$typeof:s,type:"h3",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:"A",className:"logo-bold"},_owner:null},"S"]},_owner:null},I={$$typeof:s,type:"div",key:null,ref:null,props:{className:"divider"},_owner:null},U={$$typeof:s,type:O.default,key:null,ref:null,props:i(O.default.defaultProps,{icon:"fa-cog",size:"1x",to:"settings",tooltip:"Settings"}),_owner:null},j={$$typeof:s,type:"div",key:null,ref:null,props:{className:"divider"},_owner:null},z={$$typeof:s,type:$,key:null,ref:null,props:i($.defaultProps,{}),_owner:null},B={$$typeof:s,type:"div",key:null,ref:null,props:{className:"divider"},_owner:null},Z={$$typeof:s,type:x.default,key:null,ref:null,props:i(x.default.defaultProps,{}),_owner:null},F=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.config,n=t.expanded,o=void 0;return o=n?N:R,{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:M.Link,key:null,ref:null,props:i(M.Link.defaultProps,{children:o,to:"/"}),_owner:null},className:"logo"},_owner:null},I,{$$typeof:s,type:S.default,key:null,ref:null,props:i(S.default.defaultProps,{children:U,email:e.get("email"),username:e.get("username"),gravSize:40}),_owner:null},j,{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:h.default,key:null,ref:null,props:i(h.default.defaultProps,{children:[{$$typeof:s,type:g.default,key:null,ref:null,props:i(g.default.defaultProps,{expanded:n}),_owner:null},{$$typeof:s,type:D.default,key:null,ref:null,props:i(D.default.defaultProps,{notifications:this.props.notifications,sendMessage:this.props.sendMessage}),_owner:null},z],name:"Scenario",expanded:n}),_owner:null},{$$typeof:s,type:h.default,key:null,ref:null,props:i(h.default.defaultProps,{children:{$$typeof:s,type:T.default,key:null,ref:null,props:i(T.default.defaultProps,{running:e.get("running"),connected:e.get("connected"),source:e.get("source"),port:e.get("cmdPort"),useWS:e.get("useWS"),updateConfigStore:this.props.updateConfigStore,sendMessage:this.props.sendMessage}),_owner:null},name:"Swarm",expanded:n}),_owner:null}],className:"appbar-content"},_owner:null},B,{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:h.default,key:null,ref:null,props:i(h.default.defaultProps,{children:Z,name:"Layers",expanded:n}),_owner:null},{$$typeof:s,type:y.default,key:null,ref:null,props:i(y.default.defaultProps,{expanded:n,toggleExpand:this.props.toggleExpand}),_owner:null}],className:"appbar-footer"},_owner:null}],className:n?"appBar":"appBar mini"},_owner:null}}}]),e}(p.Component);e.default=F,t.exports=e.default},327:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(231)),d=o(c),h=n(232),f=o(h),m={$$typeof:s,type:"p",key:null,ref:null,props:{children:"©2016 AxonAI, Inc."},_owner:null},y=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.expanded,n=t.toggleExpand,o=void 0;return o=e?{$$typeof:s,type:d.default,key:null,ref:null,props:i(d.default.defaultProps,{onClick:n,style:{cursor:"pointer"},size:20}),_owner:null}:{$$typeof:s,type:f.default,key:null,ref:null,props:i(f.default.defaultProps,{onClick:n,style:{cursor:"pointer"},size:20}),_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:m,className:"copyright"},_owner:null}}}]),e}(p.Component);e.default=y,t.exports=e.default},328:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(55)),d=n(73),h=o(d),f={$$typeof:s,type:h.default,key:null,ref:null,props:i(h.default.defaultProps,{id:"icon-link","class":"react-tooltip"}),_owner:null},m=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){return{$$typeof:s,type:c.Link,key:null,ref:null,props:i(c.Link.defaultProps,{children:[f,{$$typeof:s,type:"i",key:null,ref:null,props:{className:"fa "+this.props.icon+" "+this.props.size,"data-tip":this.props.tooltip,"data-for":"icon-link"},_owner:null},this.props.text],to:this.props.to}),_owner:null}}}]),e}(p.Component);e.default=m,t.exports=e.default},329:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(55));n(551);n(407);var d={$$typeof:s,type:"div",key:null,ref:null,props:{className:"active-bar"},_owner:null},h=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.tooltip,n=t.icon,o=t.currentPath,r=t.to,a=t.expanded,l="";return l=a?"fa "+n+" fa-1x":"fa "+n+" fa-lg",o===r?{$$typeof:s,type:"div",key:null,ref:null,props:{children:[d,{$$typeof:s,type:c.Link,key:null,ref:null,props:i(c.Link.defaultProps,{children:[{$$typeof:s,type:"i",key:null,ref:null,props:{className:l},_owner:null}," ",a?e:""],to:"/",activeClassName:"active"}),_owner:null}],className:"LgLink"},_owner:null}:{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:c.Link,key:null,ref:null,props:i(c.Link.defaultProps,{children:[{$$typeof:s,type:"i",key:null,ref:null,props:{className:l},_owner:null}," ",a?e:""],to:r}),_owner:null},className:"LgLink"},_owner:null}}}]),e}(p.Component);e.default=h,t.exports=e.default},330:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,r=n(1);o(r);n(408),e.default=function(t){var e=t.disabled,n=t.name,o=t.children,r=t.expanded;return r?{$$typeof:i,type:"div",key:null,ref:null,props:{children:[{$$typeof:i,type:"div",key:null,ref:null,props:{children:{$$typeof:i,type:"span",key:null,ref:null,props:{children:n},_owner:null},className:"title"},_owner:null},{$$typeof:i,type:"div",key:null,ref:null,props:{children:o,className:"content"},_owner:null}],className:e?"linkGroup disabled":"linkGroup"},_owner:null}:{$$typeof:i,type:"div",key:null,ref:null,props:{children:{$$typeof:i,type:"div",key:null,ref:null,props:{children:o,className:"content"},_owner:null},className:"linkGroup"},_owner:null}},t.exports=e.default},331:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return(0,f.bindActionCreators)({updateRequest:m.updateRequest,updateScenario:y.updateScenario,updateConfigStore:_.updateConfigStore},t)}function l(t){var e=t.data,n=t.scenario,o=t.map,i=t.config;return{data:e,scenario:n,map:o,config:i}}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},d=n(1),h=(o(d),n(28)),f=n(27),m=n(35),y=n(58),_=n(47),g=n(235),v=o(g),w=n(46),b=(o(w),n(52)),P=o(b),S={$$typeof:u,type:"div",key:null,ref:null,props:{className:"active-bar"},_owner:null},L=function(t){function e(t){var n=this;r(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._handleClick=function(){0===n.props.scenario.get("step")?(n.props.updateScenario("step",1),window.map.addLayer(n.props.map.get("countriesLayer")),n.props.updateConfigStore(!0,"editorActive")):(n.props.updateScenario("step",0),window.map.removeLayer(n.props.map.get("countriesLayer")),n.props.updateConfigStore(!1,"editorActive"))},this.state={active:this.props.config.get("editorActive"),countriesLayer:null}}return a(e,t),p(e,[{key:"shouldComponentUpdate",value:function(t,e){return!P.default.isEqual(this.props,t)||!P.default.isEqual(this.state,e)}},{key:"render",value:function(){var t=this.props.expanded,e=(this.state.active,{margin:"0 10px 0 5px"});return{$$typeof:u,type:"div",key:null,ref:null,props:{children:[this.props.scenario.get("step")>0?S:null,{$$typeof:u,type:"a",key:null,ref:null,props:{children:[{$$typeof:u,type:v.default,key:null,ref:null,props:i(v.default.defaultProps,{style:e,size:15}),_owner:null}," ",t?"New Scenario":""],onClick:this._handleClick,className:this.props.scenario.get("step")>0?"active":""},_owner:null}],className:0===this.props.data.get("categories").size?"LgLink disabled":"LgLink"},_owner:null}}}]),e}(d.Component);e.default=(0,h.connect)(l,s)(L),t.exports=e.default},332:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(567)),d=o(c),h=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){return{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:d.default,key:null,ref:null,props:i(d.default.defaultProps,{email:this.props.email,size:this.props.gravSize}),_owner:null},className:"appbar-profile-gravatar"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:"h5",key:null,ref:null,props:{children:this.props.username},_owner:null},this.props.children],className:"appbar-profile-content"},_owner:null}],className:"appbar-profile"},_owner:null}}}]),e}(p.Component);e.default=h,t.exports=e.default},333:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.map;return{map:e}}function s(t){return(0,h.bindActionCreators)({updateMapStore:f.updateMapStore},t)}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},c=n(1),d=(o(c),n(28)),h=n(27),f=n(48),m={$$typeof:l,type:"div",key:null,ref:null,props:{className:"active-bar"},_owner:null},y={$$typeof:l,type:"i",key:null,ref:null,props:{className:"fa fa-info fa-1x"},_owner:null},_=function(t){function e(t){var n=this;i(this,e),p(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this._handleClick=function(){n.props.updateMapStore("infoActive",null,!n.props.map.get("infoActive"))}}return r(e,t),u(e,[{key:"render",value:function(){var t=this.props,e=t.expanded,n=t.map;return{$$typeof:l,type:"div",key:null,ref:null,props:{children:[n.get("infoActive")?m:null,{$$typeof:l,type:"a",key:null,ref:null,props:{children:[y," ",e?"Scenario Info":""],onClick:this._handleClick,className:n.get("infoActive")?"active":""},_owner:null}],className:"LgLink"},_owner:null}}}]),e}(c.Component);e.default=(0,d.connect)(a,s)(_),t.exports=e.default},334:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.config;return{config:e}}function s(t){return(0,h.bindActionCreators)({updateConfigStore:f.updateConfigStore},t)}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},c=n(1),d=(o(c),n(28)),h=n(27),f=n(47),m={$$typeof:l,type:"div",key:null,ref:null,props:{className:"active-bar"},_owner:null},y={$$typeof:l,type:"i",key:null,ref:null,props:{className:"fa fa-wifi 1x"},_owner:null},_=function(t){function e(){var t=this;i(this,e),p(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.toggleStreaming=function(){var e=t.props.config.get("streaming");e?t.props.updateConfigStore(!1,"streaming"):t.props.updateConfigStore(!0,"streaming")}}return r(e,t),u(e,[{key:"render",value:function(){var t=this,e=this.props.config.get("streaming");return{$$typeof:l,type:"div",key:null,ref:null,props:{children:[e?m:null,{$$typeof:l,type:"a",key:null,ref:null,props:{children:[y," Stream Scenario"],onClick:function(){return t.toggleStreaming()},className:""+(e?"active":"")},_owner:null}],className:this.props.config.get("connected")?"LgLink":"LgLink disabled"},_owner:null}}}]),e}(c.Component);e.default=(0,d.connect)(a,s)(_),t.exports=e.default},335:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=t.config;return{config:e}}function l(t){return(0,m.bindActionCreators)({
fetchCurrentData:y.fetchCurrentData},t)}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),d=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},h=n(1),f=(o(h),n(28)),m=n(27),y=n(35),_=n(230),g=function(t){function e(){var t=this;r(this,e),d(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.handleClick=function(){var e=t.props.config,n=e.get("source"),o=e.get("dataPort"),i=e.get("authUser"),r=e.get("authPassword"),a=parseFloat(e.get("fieldCoverage")),s=e.get("sendOnly"),l=(t.props.fetchCurrentData,{url:"http://"+n+":"+o+"/clientRequest",method:"POST",auth:{username:i,password:r},data:{fieldCoverage:a,sendOnly:s}});"./data/tempData.json"===n&&(l=p({},l.auth,{url:n,method:"GET",data:{fieldCoverage:a,sendOnly:s}})),t.props.config.get("useWS")?t.props.sendMessage('{"mCommand": "requestData", "mSendOnly": '+JSON.stringify(l.data)+"}"):t.props.fetchCurrentData(l,t.props.config.get("useWS"),function(){t.props.notifications.addNotification({title:"Data Fetch Error",message:"No data was received from the server. Make sure you have the right source in your config options.",level:"error",position:"tr",autoDismiss:5})})}}return a(e,t),c(e,[{key:"render",value:function(){var t=this;return{$$typeof:u,type:_.ContextMenu,key:null,ref:null,props:i(_.ContextMenu.defaultProps,{children:{$$typeof:u,type:_.MenuItem,key:null,ref:null,props:i(_.MenuItem.defaultProps,{children:"Display Current Scenario",onClick:function(){return t.handleClick()}}),_owner:null},identifier:"StreamData"}),_owner:null}}}]),e}(h.Component);e.default=(0,f.connect)(s,l)(g),t.exports=e.default},336:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},u=n(1),p=(o(u),n(46)),c=o(p),d={$$typeof:a,type:"div",key:null,ref:null,props:{children:[{$$typeof:a,type:"i",key:null,ref:null,props:{className:"fa fa-stop-circle 1x"},_owner:null},"Stop the Swarm"]},_owner:null},h={$$typeof:a,type:"div",key:null,ref:null,props:{children:[{$$typeof:a,type:"i",key:null,ref:null,props:{className:"fa fa-play-circle 1x"},_owner:null},"Start the Swarm"]},_owner:null},f=function(t){function e(){var t=this;i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.toggleStartStop=function(){var e=t.props,n=e.source,o=e.port;t.props.useWS?t.props.sendMessage('{"mCommand": "toggleStartStop"}'):c.default.get("http://"+n+":"+o+"/toggleStartStop").then(function(e){t.props.updateConfigStore(e.data.running,"running")})}}return r(e,t),s(e,[{key:"render",value:function(){var t=this,e=void 0;return e=this.props.running?d:h,{$$typeof:a,type:"div",key:null,ref:null,props:{children:{$$typeof:a,type:"a",key:null,ref:null,props:{children:e,onClick:function(){return t.toggleStartStop()}},_owner:null},className:this.props.connected?"LgLink":"LgLink disabled"},_owner:null}}}]),e}(u.Component);e.default=f,t.exports=e.default},337:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=t.scenario,n=t.data,o=t.backend,i=t.config,r=t.map;return{scenario:e,data:n,backend:o,config:i,map:r}}function p(t){return(0,b.bindActionCreators)({updateRequest:P.updateRequest,updateScenario:S.updateScenario,resetScenario:S.resetScenario,updateMapStore:O.updateMapStore,fetchEventPreview:P.fetchEventPreview,updateConfigStore:k.updateConfigStore,resetPreview:P.resetPreview,updateParam:P.updateParam},t)}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),f=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},m=n(1);o(m);n(409);var y=n(46),_=o(y),g=n(52),v=o(g),w=n(28),b=n(27),P=n(35),S=n(58),O=n(48),k=n(47),x=n(163),C=o(x),D=n(339),E=o(D),T=n(338),M=o(T),A={$$typeof:c,type:"br",key:null,ref:null,props:{},_owner:null},$={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Added",className:"sub"},_owner:null},N={$$typeof:c,type:"span",key:null,ref:null,props:{children:"You must add at least one country in order to continue."},_owner:null},R={$$typeof:c,type:"br",key:null,ref:null,props:{},_owner:null},I={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Start",className:"sub"},_owner:null},U={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"End",className:"sub"},_owner:null},j={$$typeof:c,type:"h5",key:null,ref:null,props:{children:'"Now"',className:"sub"},_owner:null},z={$$typeof:c,type:"br",key:null,ref:null,props:{},_owner:null},B={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Lower Limit",className:"sub"},_owner:null},Z={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Upper Limit",className:"sub"},_owner:null},F={$$typeof:c,type:"br",key:null,ref:null,props:{},_owner:null},W={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Actor 1",className:"sub"},_owner:null},G={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Actor 2",className:"sub"},_owner:null},H={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Event",className:"sub"},_owner:null},V={$$typeof:c,type:"h5",key:null,ref:null,props:{children:"Interaction",className:"sub"},_owner:null},q=function(t){function e(t){var n=this;s(this,e),f(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.editCountries=function(){n.setState({countriesActive:!n.state.countriesActive});var t=!n.state.countriesActive;t?window.map.addLayer(n.state.countriesLayer):(window.map.removeLayer(n.state.countriesLayer),n.state.districtsLayer&&window.map.removeLayer(n.state.districtsLayer))},this.showDistricts=function(t){var e=t.id,o=t.name;console.log("show districts for "+e),window.map.closePopup();var i={url:"../data/districts.geo.json",method:"GET",params:{id:e}};(0,_.default)(i).then(function(t){window.map.removeLayer(n.state.countriesLayer);var i=L.geoJSON(t.data,{style:{color:"#FEC131"},onEachFeature:function(t,n){var i=Math.random(),r=L.popup({id:i,countryID:e,countryName:o}).setContent('<div class="leaflet-popup-title"><h5>'+i+'</h5></div>\n						<div class="leaflet-popup-expanded-content">\n							<h5 class="sub">Actor Type</h5>\n							Primary: Rebel Forces<br />\n							Secondary: State Forces\n						</div>\n						<div class="leaflet-popup-actions">\n							<div></div>\n							<div></div>\n							<div class="action"><i class="fa fa-plus fa-1x"></i></div>\n						</div>');n.bindPopup(r),n.countryID=e,n.countryName=o,n.id=i}});n.setState(d({},n.state,{districtsLayer:i,districtsActive:!0})),window.map.addLayer(i)})},this.addCountry=function(t,e){var o=t.id,r=(t.name,[]),a=n.props.data.get("previewRequest").get("allowedCountryCodes");window.map.closePopup(),r=a.indexOf(o)>-1?v.default.remove(a,function(t){return t!==o}):[].concat(i(a),[o]),n.props.updateRequest("previewRequest","allowedCountryCodes",r),console.log(n.props.data.get("previewRequest").get("allowedCountryCodes"))},this.addDistrict=function(t){var e=t.countryID,o=t.countryName,r=t.id,s=n.props.data.get("previewRequest").get("allowedCountryCodes"),l={},u={};if(window.map.closePopup(),console.log(r+" district added."),s.hasOwnProperty(e)){console.log("country already added, updated allowedDistricts");var p=s[e].allowedDistricts,c=[];v.default.contains(p,r)?(console.log("district already added, removed"),c=v.default.without(p,r)):c=[].concat(i(s[e].allowedDistricts),[r]),u={code:e,name:o,allowedDistricts:c},l=d({},s,a({},e,u))}else console.log("country not added, adding now"),u={code:e,name:o,allowedDistricts:[r]},l=d({},s,a({},e,u));n.props.updateRequest("previewRequest","allowedCountryCodes",l)},this.exitShowDistricts=function(){window.map.removeLayer(n.state.districtsLayer),window.map.addLayer(n.state.countriesLayer),n.setState(d({},n.state,{countriesActive:!0,districtsActive:!1}))},this.addAllDistricts=function(){var t=[],e={},o="",r="",s={},l=n.props.data.get("previewRequest").get("allowedCountryCodes");n.state.districtsLayer.eachLayer(function(e){t=[].concat(i(t),[e.id]),o=e.countryID,r=e.countryName}),e={code:o,name:r,allowedDistricts:t},s=d({},l,a({},o,e)),n.props.updateRequest("previewRequest","allowedCountryCodes",s),console.log(n.props.data.get("previewRequest").get("allowedCountryCodes"))},this.removeAllDistricts=function(){var t=n.props.data.get("previewRequest").get("allowedCountryCodes"),e={},o="",i="",r={};n.state.districtsLayer.eachLayer(function(t){o=t.countryID,i=t.countryName}),e={code:o,name:i,allowedDistricts:[]},r=v.default.omit(t,o),n.props.updateRequest("previewRequest","allowedCountryCodes",r),console.log(n.props.data.get("previewRequest").get("allowedCountryCodes"))},this.setActiveEditing=function(t){n.setState(d({},n.state,{editing:t}))},this.resetActiveEditing=function(){n.setState(d({},n.state,{editing:""}))},this.resetScenario=function(){n.props.resetScenario(),n.props.updateScenario("step",1)},this.nextStep=function(){n.props.updateScenario("step",n.props.scenario.get("step")+1)},this.previewScenario=function(){var t="",e="",o=n.props,i=o.source,r=o.dataPort;"./data/tempData.json"===i?(t="get",e="./data/eventPreviewData.json"):(e="http://"+i+":"+r+"/events",t="post");var a={url:e,method:t,data:d({},n.props.data.get("previewRequest").toJS(),{countOnly:!0})},s={url:e,method:t,data:d({},n.props.data.get("previewRequest").toJS(),{countOnly:!1})};n.props.fetchEventPreview(a,function(){var t=n.props.data.get("preview");n.props.notifications.addNotification({title:"Event Preview",message:"You have created a scenario with "+t.pastCount+" past events and "+t.futureCount+"\n						 future events. Are you ready to preview the new events?",level:"info",autoDismiss:0,position:"bc",action:{label:"Continue",callback:function(){n.props.fetchEventPreview(s,function(){return n.props.drawMap({type:"update",subtype:"eventPreview"})})}}})})},this.setScenario=function(){var t="",e="",o=n.props,i=o.source,r=o.cmdPort;o.dataPort;"./data/tempData.json"===i?(t="get",e="./data/eventPreviewData.json"):(e="http://"+i+":"+r+"/makeScenario",t="post");var a={url:e,method:t,data:d({},n.props.data.get("previewRequest").toJS(),{countOnly:!1,scenarioConfig:{preview:{onlyClearDb:!0,agentsPerEvent:10,agentsPerFatality:3,candidatesPerEvent:25,previewDbName:"ERFV3Preview"}}})};console.log(a),n.props.notifications.addNotification({title:"Set Scenario",message:"This will erase the current scenario and start a new scenario using the settings you chose within the editor. This cannot be undone. Continue?",level:"info",autoDismiss:0,position:"bc",action:{label:"Continue",callback:function(){n.props.fetchEventPreview(a,function(){n.props.resetScenario(),n.props.updateScenario("step",0),n.props.updateConfigStore(!0,"streaming"),window.map.removeLayer(n.props.map.get("pastPreviewLayer")),window.map.removeLayer(n.props.map.get("futurePreviewLayer")),window.map.removeLayer(n.props.map.get("countriesLayer"))},function(t){n.props.notifications.addNotification({title:"Data Fetch Error",message:"No data was received from the server. Make sure you have the right source in your config options.",level:"error",position:"bc",autoDismiss:"5"})})}},uid:"setScenario"})},this.state={countriesLayer:null,districtsLayer:null,countriesActive:!1,districtsActive:!1,editing:"",step:0}}return l(e,t),h(e,[{key:"shouldComponentUpdate",value:function(t,e){return!v.default.isEqual(this.props,t)||!v.default.isEqual(this.state,e)}},{key:"componentWillReceiveProps",value:function(t){var e=this;v.default.isEqual(this.props.data.get("categories"),t.data.get("categories"))||!function(){var n=[];_.default.get("./data/countries.geo.json").then(function(o){v.default.forIn(t.data.get("categories").COUNTRY,function(t){var e=v.default.find(o.data.features,function(e){return e.id===t.code});e.properties.events=t.events,n=[].concat(i(n),[e])});var r=L.geoJson(n,{style:{color:"#FEC131"},onEachFeature:function(t,e){var n=L.popup({id:t.id,name:t.properties.name});t.properties&&t.properties.name&&(e.bindPopup(n),e.id=t.id,e.name=t.properties.name,e.events=t.properties.events)}});e.setState({countriesLayer:r}),e.props.updateMapStore("countriesLayer",r)})}()}},{key:"componentDidUpdate",value:function(){var t=this;window.map.hasEventListeners("popupopen")||window.map.on("popupopen",function(e){var n=void 0;void 0!==e.popup._contentNode.childNodes[4]&&(n=e.popup._contentNode.childNodes[4].childNodes[3]),n&&n.addEventListener("click",function(){t.addCountry(e.popup.options,e)})})}},{key:"render",value:function(){var t=this,e=this.props,n=e.scenario,o=e.data,i=this.props.data.get("previewRequest"),a=i.get("allowedCountryCodes"),s=void 0,l=this;this.state.countriesLayer&&this.state.countriesLayer.eachLayer(function(t){a.indexOf(t.id)>-1?(t._popup.setContent('<div class="leaflet-popup-title"><h5>'+t.name+'</h5></div>\n						<div class="leaflet-popup-expanded-content">\n							<h5 class="sub">Events since '+l.props.scenario.get("minYear")+"</h5>\n							"+t.events+'\n						</div>\n						<div class="leaflet-popup-actions">\n							<div></div>\n							<div class="action"><i class="fa fa-minus fa-1x"></i></div>\n						</div>'),t.setStyle({fillOpacity:.5})):(t._popup.setContent('<div class="leaflet-popup-title"><h5>'+t.name+'</h5></div>\n						<div class="leaflet-popup-expanded-content">\n							<h5 class="sub">Events since '+l.props.scenario.get("minYear")+"</h5>\n							"+t.events+'\n						</div>\n						<div class="leaflet-popup-actions">\n							<div></div>\n							<div class="action"><i class="fa fa-plus fa-1x"></i></div>\n						</div>'),t.setStyle({fillOpacity:.2}))}),this.state.districtsLayer&&this.state.districtsLayer.eachLayer(function(t){if(a.hasOwnProperty(t.countryID)){var e=a[t.countryID];v.default.contains(e.allowedDistricts,t.id)?(t._popup.setContent('<div class="leaflet-popup-title"><h5>'+t.id+'</h5></div>\n							<div class="leaflet-popup-expanded-content">\n								<h5 class="sub">Actor Type</h5>\n								Primary: Rebel Forces<br />\n								Secondary: State Forces\n							</div>\n							<div class="leaflet-popup-actions">\n								<div></div>\n								<div></div>\n								<div class="action"><i class="fa fa-minus fa-1x"></i></div>\n							</div>'),t.setStyle({fillOpacity:.5})):(t._popup.setContent('<div class="leaflet-popup-title"><h5>'+t.id+'</h5></div>\n							<div class="leaflet-popup-expanded-content">\n								<h5 class="sub">Actor Type</h5>\n								Primary: Rebel Forces<br />\n								Secondary: State Forces\n							</div>\n							<div class="leaflet-popup-actions">\n								<div></div>\n								<div></div>\n								<div class="action"><i class="fa fa-plus fa-1x"></i></div>\n							</div>'),t.setStyle({fillOpacity:.2}))}}),a.length>0&&(s=a.join(", "));var u=void 0,p=void 0,d=void 0,h=o.get("previewRequest").get("startEndNowDates")[0],f=o.get("previewRequest").get("startEndNowDates")[1],m=o.get("previewRequest").get("startEndNowDates")[2];h&&(u=new Date(h)),f&&(p=new Date(f)),m&&(d=new Date(m));var y=i.get("fatalities")[0],_=i.get("fatalities")[1];9999===_&&(_=void 0);var g=i.get("allowedActor1TypeCodes"),w=i.get("allowedActor2TypeCodes"),b=i.get("allowedEventTypeCodes"),P=i.get("allowedInteractionTypeCodes");return{$$typeof:c,type:"div",key:null,ref:null,props:{children:[{$$typeof:c,type:"div",key:null,ref:null,props:{children:[{$$typeof:c,type:C.default,key:null,ref:null,props:r(C.default.defaultProps,{children:["Add up to five countries to your scenario by clicking on them on the map below.",A,$,{$$typeof:c,type:"p",key:null,ref:null,props:{children:a.length>0?s:N},_owner:null}],className:"countries",title:"Countries",number:"1",active:n.get("step")>0,nextStep:function(){return t.nextStep()},step:1,currentStep:n.get("step"),countries:i.get("allowedCountryCodes")}),_owner:null},{$$typeof:c,type:C.default,key:null,ref:null,props:r(C.default.defaultProps,{children:["Constrain the date range of your scenario.",R,I,{$$typeof:c,type:"p",key:null,ref:null,props:{children:u?u.getMonth()+1+"/"+u.getDate()+"/"+u.getFullYear():"No start date set."},_owner:null},U,{$$typeof:c,type:"p",key:null,ref:null,props:{children:p?p.getMonth()+1+"/"+p.getDate()+"/"+p.getFullYear():"No end date set."},_owner:null},j,{$$typeof:c,type:"p",key:null,ref:null,props:{children:d?d.getMonth()+1+"/"+d.getDate()+"/"+d.getFullYear():"No now date set."},_owner:null}],className:"date-range",title:"Date Range",number:"2",editOnClick:function(){return t.setActiveEditing("dateRange")},active:n.get("step")>1,nextStep:function(){return t.nextStep()},step:2,currentStep:n.get("step"),countries:i.get("allowedCountryCodes")}),_owner:null},{$$typeof:c,type:C.default,key:null,ref:null,props:r(C.default.defaultProps,{children:["Constrain the fatality range of your scenario.",z,B,{$$typeof:c,type:"p",key:null,ref:null,props:{children:y?y:"No lower limit set."},_owner:null},Z,{$$typeof:c,type:"p",key:null,ref:null,props:{children:_?_:"No upper limit set."},_owner:null}],className:"fatality-range",title:"Fatality Range",number:"3",numberStyle:{fontSize:"210px",marginBottom:"35px"},editOnClick:function(){return t.setActiveEditing("fatalityRange")},active:n.get("step")>2,nextStep:function(){return t.nextStep()},step:3,currentStep:n.get("step"),countries:i.get("allowedCountryCodes")}),_owner:null},{$$typeof:c,type:C.default,key:null,ref:null,props:r(C.default.defaultProps,{children:["Constrain the types of events in your scenario.",F,W,{$$typeof:c,type:"p",key:null,ref:null,props:{children:g.length>0?g.join(", "):"No actor types set."},_owner:null},G,{$$typeof:c,type:"p",key:null,ref:null,props:{children:w.length>0?w.join(", "):"No actor types set."},_owner:null},H,{$$typeof:c,type:"p",key:null,ref:null,props:{children:b.length>0?b.join(", "):"No event types set."},_owner:null},V,{$$typeof:c,type:"p",key:null,ref:null,props:{children:P.length>0?P.join(", "):"No interaction types set."},_owner:null}],className:"types",title:"Types",number:"4",numberStyle:{fontSize:"210px",marginBottom:"15px"},editOnClick:function(){return t.setActiveEditing("types")},active:n.get("step")>3,step:4,currentStep:n.get("step"),countries:i.get("allowedCountryCodes")}),_owner:null}],className:"editor-overlay"},_owner:null},{$$typeof:c,type:E.default,key:null,ref:null,props:r(E.default.defaultProps,{exitShowDistricts:this.exitShowDistricts,addAllDistricts:this.addAllDistricts,removeAllDistricts:this.removeAllDistricts,districtsActive:this.state.districtsActive,active:this.props.scenario.get("step")>0,previewScenario:this.previewScenario,resetScenario:this.resetScenario,setScenario:this.setScenario}),_owner:null},{$$typeof:c,type:M.default,key:null,ref:null,props:r(M.default.defaultProps,{activeSection:this.state.editing,resetActiveSection:this.resetActiveEditing,data:o,scenario:n}),_owner:null}],className:"editor-container"},_owner:null}}}]),e}(m.Component);e.Editor=q,e.default=(0,w.connect)(u,p)(q)},338:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return(0,f.bindActionCreators)({updateRequest:m.updateRequest,updateScenario:y.updateScenario},t)}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),p=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},c=n(1);o(c);n(410);var d=n(108),h=n(28),f=n(27),m=n(35),y=n(58),_=n(163),g=(o(_),n(1241)),v=o(g),w=n(1244),b=o(w),P=n(1235),S=o(P),L=n(1192),O=o(L),k={$$typeof:l,type:"h2",key:null,ref:null,props:{children:"Date Range"},_owner:null},x={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Start",className:"sub"},_owner:null},C={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"End",className:"sub"},_owner:null},D={$$typeof:l,type:"h5",key:null,ref:null,props:{children:'"Now"',className:"sub"},_owner:null},E={$$typeof:l,type:"h2",key:null,ref:null,props:{children:"Fatality Range"},_owner:null},T={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Lower Limit",className:"sub"},_owner:null},M={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Upper Limit",className:"sub"},_owner:null},A={$$typeof:l,type:"h2",key:null,ref:null,props:{children:"Types"},_owner:null},$={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Actor 1",className:"sub"},_owner:null},N={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Actor 2",className:"sub"},_owner:null},R={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Event",className:"sub"},_owner:null},I={$$typeof:l,type:"h5",key:null,ref:null,props:{children:"Interaction",className:"sub"},_owner:null},U=function(t){function e(){var t=this;r(this,e),p(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.handleDateChange=function(e,n){var o=void 0,i=e.getTime(),r=t.props.data.get("previewRequest").get("startEndNowDates");"startDate"===n?o=[i,r[1],r[2]]:"endDate"===n&&void 0===r[2]?o=[r[0],i,i]:"endDate"===n?o=[r[0],i,r[2]]:"nowDate"===n&&(o=[r[0],r[1],i]),t.props.updateRequest("previewRequest","startEndNowDates",o)},this._handleLimitChange=function(e,n){var o=void 0;if("lower"===e){var i=t.props.data.get("previewRequest").get("fatalities")[1],r=i;void 0===i&&(r=9999),o=[n,r]}else if("upper"===e){var a=t.props.data.get("previewRequest").get("fatalities")[0],s=a;void 0===a&&(s=0),o=[s,n]}t.props.updateRequest("previewRequest","fatalities",o)},this._handleSelect=function(e,n){var o="selected"+(0,d.capitalize)(e)+"Objs",i="allowed"+(0,d.capitalize)(e)+"TypeCodes";"country"===e&&(i="allowed"+(0,d.capitalize)(e)+"Codes"),t.props.updateScenario(o,n),t.props.updateRequest("previewRequest",i,n)}}return a(e,t),u(e,[{key:"shouldComponentUpdate",value:function(t){return t.data.get("swarmState")===this.props.data.get("swarmState")}},{key:"render",value:function(){var t=this,e=this.props,n=e.activeSection,o=e.data,r=(e.scenario,void 0),a=void 0,s=void 0,u=o.get("previewRequest").get("startEndNowDates")[0],p=o.get("previewRequest").get("startEndNowDates")[1],c=o.get("previewRequest").get("startEndNowDates")[2];if(u&&(r=new Date(u)),p&&(a=new Date(p)),c&&(s=new Date(c)),"dateRange"===n)return{$$typeof:l,type:"div",key:null,ref:null,props:{children:{$$typeof:l,type:"div",key:null,ref:null,props:{children:[{$$typeof:l,type:"div",key:null,ref:null,props:{children:[k,{$$typeof:l,type:"span",key:null,ref:null,props:{children:{$$typeof:l,type:O.default,key:null,ref:null,props:i(O.default.defaultProps,{onClick:this.props.resetActiveSection}),_owner:null},style:{"float":"right"}},_owner:null}],className:"title-bg"},_owner:null},{$$typeof:l,type:"div",key:null,ref:null,props:{children:[x,{$$typeof:l,type:v.default,key:null,ref:null,props:i(v.default.defaultProps,{onChange:function(e){return t.handleDateChange(e,"startDate")},value:r}),_owner:null},C,{$$typeof:l,type:v.default,key:null,ref:null,props:i(v.default.defaultProps,{onChange:function(e){return t.handleDateChange(e,"endDate")},value:a}),_owner:null},D,{$$typeof:l,type:v.default,key:null,ref:null,props:i(v.default.defaultProps,{onChange:function(e){return t.handleDateChange(e,"nowDate")},value:s,minDate:r,maxDate:a}),_owner:null}],className:"content"},_owner:null}],className:"editor-modal"},_owner:null},className:"editor-modal-container"},_owner:null};if("fatalityRange"===n){var d=[0,1,5,10,20].map(function(t){return{label:t,value:t}}),h=[50,100,175,250,500,9999].map(function(t){return{label:t,value:t}});return{$$typeof:l,type:"div",key:null,ref:null,props:{children:{$$typeof:l,type:"div",key:null,ref:null,props:{children:[{$$typeof:l,type:"div",key:null,ref:null,props:{children:[E,{$$typeof:l,type:"span",key:null,ref:null,props:{children:{$$typeof:l,type:O.default,key:null,ref:null,props:i(O.default.defaultProps,{onClick:this.props.resetActiveSection}),_owner:null},style:{"float":"right"}},_owner:null}],className:"title-bg"},_owner:null},{$$typeof:l,type:"div",key:null,ref:null,props:{children:[T,{$$typeof:l,type:b.default,key:null,ref:null,props:i(b.default.defaultProps,{onChange:function(e){return t._handleLimitChange("lower",e)},source:d,value:o.get("previewRequest").get("fatalities")[0]}),_owner:null},M,{$$typeof:l,type:b.default,key:null,ref:null,props:i(b.default.defaultProps,{onChange:function(e){return t._handleLimitChange("upper",e)},source:h,value:o.get("previewRequest").get("fatalities")[1]}),_owner:null}],className:"content"},_owner:null}],className:"editor-modal"},_owner:null},className:"editor-modal-container"},_owner:null}}return"types"===n?{$$typeof:l,type:"div",key:null,ref:null,props:{children:{$$typeof:l,type:"div",key:null,ref:null,props:{children:[{$$typeof:l,type:"div",key:null,ref:null,props:{children:[A,{$$typeof:l,type:"span",key:null,ref:null,props:{children:{$$typeof:l,type:O.default,key:null,ref:null,props:i(O.default.defaultProps,{onClick:this.props.resetActiveSection}),_owner:null},style:{"float":"right"}},_owner:null}],className:"title-bg"},_owner:null},{$$typeof:l,type:"div",key:null,ref:null,props:{children:[$,{$$typeof:l,type:S.default,key:null,ref:null,props:i(S.default.defaultProps,{onChange:function(e){return t._handleSelect("actor1",e)},source:this.props.scenario.get("actor1Options"),selectedPosition:"below",value:this.props.data.get("previewRequest").get("allowedActor1TypeCodes")}),_owner:null},N,{$$typeof:l,type:S.default,key:null,ref:null,props:i(S.default.defaultProps,{onChange:function(e){return t._handleSelect("actor2",e)},source:this.props.scenario.get("actor2Options"),selectedPosition:"below",value:this.props.data.get("previewRequest").get("allowedActor2TypeCodes")}),_owner:null},R,{$$typeof:l,type:S.default,key:null,ref:null,props:i(S.default.defaultProps,{onChange:function(e){return t._handleSelect("event",e)},source:this.props.scenario.get("eventOptions"),selectedPosition:"below",value:this.props.data.get("previewRequest").get("allowedEventTypeCodes")}),_owner:null},I,{$$typeof:l,type:S.default,key:null,ref:null,props:i(S.default.defaultProps,{onChange:function(e){return t._handleSelect("interaction",e)},source:this.props.scenario.get("interactionOptions"),selectedPosition:"below",value:this.props.data.get("previewRequest").get("allowedInteractionTypeCodes")}),_owner:null}],className:"content"},_owner:null}],className:"editor-modal"},_owner:null},className:"editor-modal-container"},_owner:null}:null}}]),e}(c.Component);e.default=(0,h.connect)(null,s)(U),t.exports=e.default},339:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=(o(p),n(887)),d=n(73),h=o(d),f={$$typeof:s,type:c.FaRotateLeft,key:null,ref:null,props:i(c.FaRotateLeft.defaultProps,{}),_owner:null},m={$$typeof:s,type:c.FaMapO,key:null,ref:null,props:i(c.FaMapO.defaultProps,{}),_owner:null},y={$$typeof:s,type:c.FaCheck,key:null,ref:null,props:i(c.FaCheck.defaultProps,{}),_owner:null},_={$$typeof:s,type:h.default,key:null,
ref:null,props:i(h.default.defaultProps,{id:"toolbar","class":"react-tooltip"}),_owner:null},g=function(t){function e(){r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return a(e,t),l(e,[{key:"render",value:function(){return{$$typeof:s,type:"div",key:null,ref:null,props:{children:[{$$typeof:s,type:"div",key:null,ref:null,props:{children:f,className:"toolbar-icon",onClick:this.props.resetScenario,"data-tip":"Reset Scenario","data-for":"toolbar"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:m,className:"toolbar-icon",onClick:this.props.previewScenario,"data-tip":"Preview Scenario","data-for":"toolbar"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:y,className:"toolbar-icon",onClick:this.props.setScenario,"data-tip":"Set Scenario","data-for":"toolbar"},_owner:null},_],className:this.props.active?"editor-toolbar":"editor-toolbar hide-off-screen"},_owner:null}}}]),e}(p.Component);e.default=g,t.exports=e.default},340:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){var e=t.map,n=t.data,o=t.scenario,i=t.config;return{map:e,data:n,scenario:o,config:i}}function u(t){return(0,y.bindActionCreators)({updateMapStore:_.updateMapStore,updateMapStoreAndStorage:_.updateMapStoreAndStorage,mapLoaded:_.mapLoaded,fetchCurrentData:g.fetchCurrentData,updateParam:g.updateParam},t)}Object.defineProperty(e,"__esModule",{value:!0});var p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},f=n(1);o(f);n(413);var m=n(28),y=n(27),_=n(48),g=n(35),v=n(52),w=o(v),b=n(46),P=o(b),S=n(165),L=(o(S),n(164)),O=o(L),k=n(337),x=o(k),C=n(341),D=o(C),E=n(166),T=o(E),M=n(348),A=o(M);n(439),n(347),n(411);var $={$$typeof:p,type:"div",key:null,ref:null,props:{className:"leaflet",id:"leaflet"},_owner:null},N=function(t){function e(t){var n=this;a(this,e),h(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.newFetchTimer=function(t){n.state.stopwatch&&(console.log("AXONSPA: Stopwatch exists, removing."),clearInterval(n.state.stopwatch),n.setState({timer:0,stopwatch:null})),console.log("AXONSPA: New stopwatch with a rate of "+t/1e3+"s being created..");var e=setInterval(function(){n.setState({timer:n.state.timer+1})},t);n.setState({stopwatch:e,timer:1})},this.fetchData=function(){var t="",e="",o=n.props.config.get("source"),i=n.props.config.get("dataPort"),r=n.props.config.get("authUser"),a=n.props.config.get("authPassword");"./data/tempData.json"===o?(t=o,e="get"):(t="http://"+o+":"+i+"/clientRequest",e="post");var s={url:t,method:e,auth:{username:""+r,password:""+a},data:{fieldCoverage:parseFloat(n.props.config.get("fieldCoverage")),sendOnly:c({},n.props.config.get("sendOnly"))}};n.props.config.get("useWS")?n.props.sendMessage('{"mCommand": "requestData", "mSendOnly": '+JSON.stringify(s.data)+"}"):n.props.fetchCurrentData(s,n.props.config.get("useWS"))},this.drawMap=function(t){var e=void 0;if(e=window.map,"update"===t.type){var o=n.props.data.get("current").fields,r=n.props.data.get("current").events,a=(n.props.data.get("preview"),void 0),s=void 0,l=void 0,u=0,p=0,c=0,d=0;if("default"===t.subtype){for(var h in o)n.drawRectangles(h);"past"in r&&(a=n.drawCircles("past")),"future"in r&&(s=n.drawCircles("future"))}else"eventPreview"===t.subtype&&(a=n.drawCircles("pastPreview"),s=n.drawCircles("futurePreview"));l=[].concat(i(a),i(s));for(var f=0;f<l.length;f++)u+=l[f][0],p+=l[f][1];return c=u/l.length,d=p/l.length,n.props.mapLoaded(),[c,d]}t.type&&null===t.type||(e&&e.remove(),e=A.default.map("leaflet",{zoomControl:!1}),A.default.control.zoom({position:"bottomright"}).addTo(e),e.setView([10,20],4),A.default.tileLayer(n.props.config.get("tileServer"),{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"lizdownsaxonai.pi5glfpn",accessToken:"pk.eyJ1IjoibGl6ZG93bnNheG9uYWkiLCJhIjoiY2ltZmpzajlhMDFweHZnbTZsbjFxYWE5dCJ9.9v-Z1-18gwAwxAzCHCBn9g"}).addTo(e),window.map=e)},this.drawRectangles=function(t){var e={},o=0,r=void 0,a="",s=0,l=.05,u=1,p="",c=void 0,d=.05;if("Origin"===t?(e=n.props.data.get("current").fields.Origin.data,o=n.props.data.get("current").fields.Origin.areaCovered,p="origin",a="#218380"):"AdvancedRisk"===t?(e=n.props.data.get("current").fields.AdvancedRisk.data,o=n.props.data.get("current").fields.AdvancedRisk.areaCovered,p="erf",a="#D81159"):"NaiveRisk"===t?(e=n.props.data.get("current").fields.NaiveRisk.data,o=n.props.data.get("current").fields.NaiveRisk.areaCovered,p="sota",a="#FFBC42"):"GeoData"===t&&(e=n.props.data.get("current").fields.GeoData.Roads.data,p="roads",a="black",s=.3),void 0===e){var h=p+"Layer",f=p+"HeatmapLayer",m=n.props.map.get(h),y=n.props.map.get(f);return m&&window.map.removeLayer(m),void(y&&window.map.removeLayer(y))}if("object"==typeof e){console.log("AXONSPA: drawRectangles - "+t),o=(100*o).toFixed(2);var _=Object.keys(e).map(function(t){return e[t].strength}),g=Math.min.apply(null,_),v=Math.max.apply(null,_),w=n.props.map.get(p+"Visible"),b=n.props.map.get(p+"HeatmapVisible"),P=A.default.layerGroup(),S=[];for(var L in e)if(e.hasOwnProperty(L)){var O=e[L],k=O.coordinates[0],x=O.coordinates[1],C=parseFloat(O.strength.toFixed(4)),D=((u-l)*C+l*v-u*g)/(v-g),E=[[k+d,x-d],[k+d,x+d],[k-d,x+d],[k-d,x-d]];c=A.default.popup().setContent(""+C),"roads"===p?(r=A.default.rectangle(E,{stroke:!0,weight:s,opacity:D,color:a,fill:!1}),P.addLayer(r)):(S=[].concat(i(S),[[k,x,C]]),n.props.config.get("drawGrids")&&(r=A.default.rectangle(E,{stroke:!1,fillColor:a,fillOpacity:D}).bindPopup(c),P.addLayer(r)))}if("roads"!==p){var T=A.default.heatLayer(S,{radius:10}).addTo(window.map),h=p+"HeatmapLayer",y=n.props.map.get(h);b||window.map.removeLayer(T),y&&window.map.removeLayer(y),n.props.updateMapStore(h,T)}if(n.props.config.get("drawGrids")||"roads"===p){var h=p+"Layer",m=n.props.map.get(h);m&&window.map.removeLayer(m),window.map.addLayer(P),w||window.map.removeLayer(P),n.props.updateMapStore(h,P)}else{var h=p+"Layer",m=n.props.map.get(h);m&&window.map.removeLayer(m),n.props.updateMapStore(h,{})}}},this.drawCircles=function(t){console.log("AXONSPA: drawCircles - "+t);var e={},o=void 0,r=[],a=n.props.map.get(t+"Visible"),s=n.props.map.get(t+"Clustering"),l=n.props.data,u=window.map;"past"===t?e=l.get("current").events.past.data:"future"===t?e=l.get("current").events.future.data:"pastPreview"===t?e=l.get("preview").PAST:"futurePreview"===t&&(e=l.get("preview").FUTURE),o=s?A.default.markerClusterGroup({iconCreateFunction:function(e){return A.default.divIcon({html:'<span class="cluster-text">'+e.getChildCount()+"</span>",className:"cluster "+t+"-marker"})}}):A.default.layerGroup();for(var p in e)if(e.hasOwnProperty(p)){var c=e[p],d=c.coordinates[0],h=c.coordinates[1],f=A.default.popup().setContent(c.fatalities+" fatalities on "+c.date),m=A.default.marker([d,h],{CELL_ID:c.CELL_ID,icon:A.default.divIcon({className:"single-marker "+t+"-marker"})}).bindPopup(f);o.addLayer(m),r=[].concat(i(r),[[d,h]])}var y=n.props.map.get(t+"Layer");return y&&u.removeLayer(y),a&&u.addLayer(o),a||u.removeLayer(o),n.props.updateMapStore(t+"Layer",o),r},this.state={dataExists:!1,timer:0,stopwatch:null}}return s(e,t),d(e,[{key:"componentDidMount",value:function(){this.drawMap({type:"default"}),this.newFetchTimer(1e3*parseFloat(this.props.config.get("streamRate")))}},{key:"componentDidUpdate",value:function(t,e){var n=this,o=[6,12],i=this.props,r=i.data,a=i.map,s=i.config,l={clustering:{past:t.map.get("pastClustering"),future:t.map.get("futureClustering")},draw:t.config.get("drawGrids"),data:{fields:t.data.get("current").fields,events:t.data.get("current").events}},u={clustering:{past:a.get("pastClustering"),future:a.get("futureClustering")},draw:s.get("drawGrids"),data:{fields:r.get("current").fields,events:r.get("current").events}},p={data:{events:c({},t.data.get("preview").PAST,t.data.get("preview").FUTURE)},clustering:{past:t.map.get("pastPreviewClustering"),future:t.map.get("futurePreviewClustering")}},d={data:{events:c({},r.get("preview").PAST,r.get("preview").FUTURE)},clustering:{past:a.get("pastPreviewClustering"),future:a.get("futurePreviewClustering")}},h=!1,f=!1;if(void 0===u.data.fields&&void 0===u.data.events||(f=!0),void 0!==d.data.events&&Object.keys(d.data.events).length>0&&(h=!0),!w.default.isEqual(l,u)&&f&&(console.log("AXONSPA: Map re-drawn. ["+new Date+"]"),o=this.drawMap({type:"update",subtype:"default"})),!w.default.isEqual(l.data.events,u.data.events)){var m=s.get("source"),y=s.get("dataPort"),_={method:"get",url:"http://"+m+":"+y+"/scenarioInfo"};"./data/tempData.json"===m&&(_={method:"get",url:"./data/scenarioInfo.json"}),(0,P.default)(_).then(function(t){n.props.updateParam("scenarioInfo",t.data)})}!w.default.isEqual(p,d)&&h&&(console.log("AXONSPA: Map re-drawn (event preview). ["+new Date+"]"),o=this.drawMap({type:"update",subtype:"eventPreview"})),w.default.isEqual(l.data.events,u.data.events)&&w.default.isEqual(p.data.events,d.data.events)||window.map.setView(o),t.config.get("tileServer")!==s.get("tileServer")&&(console.log("AXONSPA: Map re-drawn due tile server change. ["+new Date+"]"),this.drawMap({type:"default"}),f&&this.drawMap({type:"update",subtype:"default"}),h&&this.drawMap({type:"update",subtype:"eventPreview"})),t.config.get("streamRate")!==s.get("streamRate")&&this.newFetchTimer(1e3*parseFloat(s.get("streamRate"))),!t.config.get("streaming")&&s.get("streaming")&&this.fetchData(),s.get("streaming")&&e.timer<this.state.timer&&this.fetchData()}},{key:"render",value:function(){var t=this.props,e=(t.notifications,t.map),n=t.scenario,o=t.data,i=t.config,a=void 0!==o.get("current").fields||void 0!==o.get("current").events;return{$$typeof:p,type:"div",key:null,ref:null,props:{children:{$$typeof:p,type:"div",key:null,ref:null,props:{children:[{$$typeof:p,type:O.default,key:null,ref:null,props:r(O.default.defaultProps,{loaded:e.get("loaded")}),_owner:null},{$$typeof:p,type:x.default,key:null,ref:null,props:r(x.default.defaultProps,{drawMap:this.drawMap,notifications:this.props.notifications,source:i.get("source"),dataPort:i.get("dataPort"),cmdPort:i.get("cmdPort")}),_owner:null},{$$typeof:p,type:D.default,key:null,ref:null,props:r(D.default.defaultProps,{data:o,config:i,editorActive:n.get("step")>0,currentDataExists:a}),_owner:null},$,{$$typeof:p,type:T.default,key:null,ref:null,props:r(T.default.defaultProps,{data:o}),_owner:null}],className:"map-plus-scenario"},_owner:null},className:"map-container"},_owner:null}}}]),e}(f.Component);e.default=(0,m.connect)(l,u)(N),t.exports=e.default},341:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},u=n(1);o(u);n(415);var p=n(108),c=n(52),d=(o(c),{$$typeof:a,type:"h4",key:null,ref:null,props:{children:"Current Scenario"},_owner:null}),h={$$typeof:a,type:"div",key:null,ref:null,props:{className:"line-break"},_owner:null},f={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"Start Date",className:"sub"},_owner:null},m={$$typeof:a,type:"br",key:null,ref:null,props:{},_owner:null},y={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"Now Date",className:"sub"},_owner:null},_={$$typeof:a,type:"br",key:null,ref:null,props:{},_owner:null},g={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"End Date",className:"sub"},_owner:null},v={$$typeof:a,type:"br",key:null,ref:null,props:{},_owner:null},w={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"Countries",className:"sub"},_owner:null},b={$$typeof:a,type:"br",key:null,ref:null,props:{},_owner:null},P={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"Fatalities",className:"sub"},_owner:null},S={$$typeof:a,type:"br",key:null,ref:null,props:{},_owner:null},L={$$typeof:a,type:"h5",key:null,ref:null,props:{children:"Events",className:"sub"},_owner:null},O=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.editorActive,o=t.currentDataExists,i=(t.config,e.get("swarmState")),r=e.get("scenarioInfo"),s=void 0,l=void 0,u=void 0,c="",O="",k="",x={},C=void 0!==r,D="Not connected to the swarm.";return C&&(s=new Date(r.startEndNowDates[2]),l=new Date(r.startEndNowDates[0]),u=new Date(r.startEndNowDates[1]),c=(0,p.monthNumToString)(l.getMonth()+1)+" "+l.getDate()+", "+l.getFullYear(),O=(0,p.monthNumToString)(u.getMonth()+1)+" "+u.getDate()+", "+u.getFullYear(),k=(0,p.monthNumToString)(s.getMonth()+1)+" "+s.getDate()+", "+s.getFullYear()),void 0!==i&&(D=i.numPastEvents+" Past / "+i.numFutureEvents+" Future"),x=n?{bottom:"110px",left:"20px"}:{bottom:"50px",left:"20px"},o||(x={bottom:"-300px",left:"20px"}),{$$typeof:a,type:"div",key:null,ref:null,props:{children:[d,h,{$$typeof:a,type:"div",key:null,ref:null,props:{children:C?{$$typeof:a,type:"div",key:null,ref:null,props:{children:[f,c,m,y,k,_,g,O,v,w,r.allowedCountryCodes.join(", "),b,P,r.fatalities[0]," - ",r.fatalities[1],S,L,D]},_owner:null}:"No scenario info has been received.",className:"content"},_owner:null}],style:x,className:"scenario-info-window"},_owner:null}}}]),e}(u.Component);e.default=O,t.exports=e.default},342:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,s=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},u=n(1),p=(o(u),{$$typeof:a,type:"div",key:null,ref:null,props:{children:"Route Not Found",className:"not-found"},_owner:null}),c=function(t){function e(){i(this,e),l(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return r(e,t),s(e,[{key:"render",value:function(){return p}}]),e}(u.Component);e.default=c,t.exports=e.default},343:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),u=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},p=n(1),c=o(p),d=n(260),h=o(d),f=n(269),m=o(f),y=n(73),_=(o(y),function(t){function e(){var t=this;r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments),this.updateStringSetting=function(e,n,o){var i=t.refs.input.value;o.preventDefault(),t.props.update(e,i),t.props.setActive(e,o)},this.updateBooleanSetting=function(e){t.props.v?t.props.update(e,!1):t.props.update(e,!0)},this.updateNumberSetting=function(e,n){t.props.update(e,n)}}return a(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.type,o=e.active,r=e.k,a=e.v,l=e.title,u=e.description,p=e.max,d=e.min,f=e.step;if("input"===n){var y=new String(a);return o&&(y={$$typeof:s,type:"form",key:null,ref:null,props:{children:c.default.createElement("input",{className:"setting-input",type:"text",placeholder:a,ref:"input"}),onSubmit:function(e){return t.updateStringSetting(r,a,e)}},_owner:null}),{$$typeof:s,type:"div",key:r,ref:null,props:{children:[{$$typeof:s,type:"p",key:null,ref:null,props:{children:l,"data-tip":u,"data-for":"settings"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:y,className:"setting-string"},_owner:null}],className:"settings-content-row "+(r===o?"active":""),onClick:function(e){return t.props.setActive(r,e)}},_owner:null}}return"checkbox"===n?{$$typeof:s,type:"div",key:r,ref:null,props:{children:[{$$typeof:s,type:"p",key:null,ref:null,props:{children:l,"data-tip":u,"data-for":"settings"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:h.default,key:null,ref:null,props:i(h.default.defaultProps,{checked:a,onChange:function(){return t.updateBooleanSetting(r)}}),_owner:null},className:"setting-boolean"},_owner:null}],className:"settings-content-row"},_owner:null}:"slider"===n?{$$typeof:s,type:"div",key:r,ref:null,props:{children:[{$$typeof:s,type:"p",key:null,ref:null,props:{children:l,"data-tip":u,"data-for":"settings"},_owner:null},{$$typeof:s,type:"div",key:null,ref:null,props:{children:{$$typeof:s,type:m.default,key:null,ref:null,props:i(m.default.defaultProps,{max:p,min:d,step:f,editable:!0,value:parseFloat(a),onChange:function(e){return t.updateNumberSetting(r,e)}}),_owner:null},className:"setting-number"},_owner:null}],className:"settings-content-row"},_owner:null}:void 0}},{key:"componentDidUpdate",value:function(){this.refs.input&&this.refs.input.focus()}}]),e}(p.Component));e.default=_,t.exports=e.default},344:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(t)for(var n in t)"undefined"==typeof e[n]&&(e[n]=t[n]);return e}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=t.config,n=t.data;return{config:e,data:n}}function l(t){return(0,g.bindActionCreators)({updateConfigStore:v.updateConfigStore,updateConfigStoreAndStorage:v.updateConfigStoreAndStorage},t)}Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,p=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(t,e,n){for(var o=!0;o;){var i=t,r=e,a=n;o=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(i);if(null===u)return;t=u,e=r,n=a,o=!0,s=u=void 0}},d=n(1);o(d);n(416);var h=n(52),f=o(h),m=n(46),y=o(m),_=n(28),g=n(27),v=n(47),w=n(55),b=n(343),P=o(b),S=n(260),L=(o(S),n(269)),O=(o(L),n(73)),k=o(O),x={$$typeof:u,type:"h2",key:null,ref:null,props:{children:"Settings"},_owner:null},C={$$typeof:u,type:"i",key:null,ref:null,props:{className:"fa fa-times 1x"},_owner:null},D={$$typeof:u,type:"div",key:null,ref:null,props:{children:["List of Leaflet tile servers available ",{$$typeof:u,type:"a",key:null,ref:null,props:{children:"here",href:"https://leaflet-extras.github.io/leaflet-providers/preview/",target:"_blank"},_owner:null},"."],className:"providers"},_owner:null},E={$$typeof:u,type:k.default,key:null,ref:null,props:i(k.default.defaultProps,{id:"settings",html:!0,"class":"setting-tooltip react-tooltip"}),_owner:null},T=function(t){function e(t){var n=this;r(this,e),c(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.setActive=function(t,e){t===n.state.active?n.setState({active:null}):n.setState({active:t})},this.updateSwarmModeling=function(){var t=n.props.config.get("cmdPort"),e=n.props.config.get("source"),o="http://"+e+":"+t+"/updateModel";"./data/tempData.json"===e&&(o="http://localhost:3000/updateModel"),y.default.post(o,{attack:n.props.config.get("preferredAttackDistance"),roadsOrigin:n.props.config.get("importanceOfRoadsOrigin"),roadsERF:n.props.config.get("importanceOfRoadsERF")}).then(function(t){console.log(t.data),n.setState({processParamsUpdated:!1})})},this.state={active:null,processParamsUpdated:!1}}return a(e,t),p(e,[{key:"shouldComponentUpdate",value:function(t,e){return!t.config.equals(this.props.config)||e!==this.state}},{key:"componentDidUpdate",value:function(t,e){var n={attack:t.config.get("preferredAttackDistance"),roadsOrigin:t.config.get("importanceOfRoadsOrigin"),roadsERF:t.config.get("importanceOfRoadsERF")},o={attack:this.props.config.get("preferredAttackDistance"),roadsOrigin:this.props.config.get("importanceOfRoadsOrigin"),roadsERF:this.props.config.get("importanceOfRoadsERF")};f.default.isEqual(n,o)||this.setState({processParamsUpdated:!0})}},{key:"render",value:function(){var t=(this.props.config.entries(),[]),e="fa fa-check 1x updateSwarm",n="saveText";this.state.processParamsUpdated&&(e="fa fa-check 1x updateSwarm active",n="saveText visible");var o={swarmConnection:{title:"Swarm Connection",description:"Settings that determine where the swarm is, how much of the swarm's data you would like to see,\n					how often you would like to get that data, and whether you would like to view that data in legacy mode.",settings:{useWS:{title:"Use WebSockets",type:"checkbox",description:"Use a WebSocket connection instead of the standard API endpoint connection."},source:{title:"Source",type:"input",description:"Root URL/IP of the swarming system you would like to connect to."},dataPort:{title:"Data Port",type:"input",description:"The port for the current scenario map data, current scenario\n							info, the editor configuration data, and event preview data. <i>(default: 50900)</i>"},cmdPort:{title:"Command Port",type:"input",description:"The port used to create new scenarios, start/stop the swarm,\n							and retrieve the swarm's cycle meta data. <i>(default: 50910)</i>"},fieldCoverage:{title:"Field Coverage",type:"slider",description:"The percentage of fields with the highest risk\n							that are retrieved from the swarm and displayed on the map.",min:.01,max:.2,step:.01},drawGrids:{title:"Draw Grids",type:"checkbox",description:"If checked, the legacy style of displaying map data will be enabled.\n							You can turn on/off the visiblity of these grids using the eye icon in the map key.<br />\n							<i>FYI: Increases map re-render times while streaming.</i>"},streamRate:{title:"Stream Rate",type:"slider",description:"The rate in seconds that the application will\n							ask the swarm for new field data while streaming.",min:10,max:60,step:5}}},swarmProcess:{title:"Swarm Process",description:"Settings that determine how the swarm will traverse and utilize the data within your current scenario.",requiresSubmit:!0,settings:{preferredAttackDistance:{title:"Preferred Attack Distance (km)",type:"slider",description:'In the "average" attack from a base on a target, how far do the attackers usually travel?<br /><br />\n\n						<b>Too short:</b> They antagonize the population near their base.<br /><br />\n\n						<b>Too long:</b> Logistics for individual attacks become too expensive to accomplish the desired effect.',min:1,max:1e3,step:10},importanceOfRoadsOrigin:{title:"Importance of Roads (Origin)",type:"slider",description:"For the “average” attacker, how much does it matter whether their base is near major roads or not?<br /><br />\n\n							<b>Low:</b> Attackers have sufficient support in the general area where they may be based and therefore the\n							presence of civilians and easier access for defenders via those roads is of little concern.<br /><br />\n\n							<b>High:</b> Attackers need to hide and protect their base operation to avoid being expelled from the area.",min:0,max:1,step:.01},importanceOfRoadsERF:{title:"Importance of Roads (ERF)",type:"slider",description:"For the “average” attacker, how much does the presence of major roads influence the target choice?<br /><br />\n\n								<b>Low:</b> Attackers find worthwhile targets in any location within their preferred range\n								and defenders will have to cover a wider space to protect the population.<br /><br />\n\n								<b>High:</b> The combination of the ease of access and target-rich environment near\n								major roads encourages attackers to select their targets opportunistically.",min:0,max:1,step:.01}}},user:{title:"User",description:"Personal settings to change how AXON:SPA looks only to you.",settings:{username:{title:"Username",type:"input",description:"Displayed next to your profile image."},email:{title:"Email",type:"input",description:"Used solely for retrieving a profile image using Gravatar."},tileServer:{title:"Tile Server URL",type:"input",description:"The URL of the tile server that the Leaflet\n						map will retrieve the map tiles from. List is at the top of this settings section."}}}};for(var r in o){var a=o[r],s=[];s.push({$$typeof:u,type:"div",key:null,ref:null,props:{children:[{$$typeof:u,type:"h5",key:null,ref:null,props:{children:a.title,className:"sub","data-tip":a.description,"data-for":"settings"},_owner:null},a.requiresSubmit?{$$typeof:u,type:"span",key:null,ref:null,props:{children:[{$$typeof:u,type:"p",key:null,ref:null,props:{children:"Save your changes.",className:n},_owner:null},{$$typeof:u,type:"i",key:null,ref:null,props:{className:e,onClick:this.updateSwarmModeling,"data-for":"settings","data-tip":"Click here to save your swarm process changes."},_owner:null}],style:{"float":"right"}},_owner:null}:null],className:"category-title"},_owner:null});for(var l in a.settings){var p=a.settings[l];s.push({$$typeof:u,type:P.default,key:null,ref:null,props:i(P.default.defaultProps,{type:p.type,title:p.title,k:l,v:this.props.config.get(l),setActive:this.setActive,active:this.state.active===l,min:p.min,max:p.max,step:p.step,description:p.description,update:this.props.updateConfigStoreAndStorage}),_owner:null})}t.push(s)}return{$$typeof:u,type:"div",key:null,ref:null,props:{children:[{$$typeof:u,type:"div",key:null,ref:null,props:{children:[x,{$$typeof:u,type:w.Link,key:null,ref:null,props:i(w.Link.defaultProps,{children:C,to:"/",style:{"float":"right"}}),_owner:null}],className:"route-overlay-header"},_owner:null},{$$typeof:u,type:"div",key:null,ref:null,props:{children:[D,t,E],className:"settings-content"},_owner:null}],className:"route-content"},_owner:null}}}]),e}(d.Component);e.default=(0,_.connect)(s,l)(T),t.exports=e.default},345:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="./data/eventPreviewData.json";e.localEventData=n;var o="./data/tempData.json";e.localData=o;var i="./data/categoryData.json";e.categoryData=i;var r="http://10.1.88.111";e.hanaSource=r;var a="http://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png";e.positron=a},346:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={NotificationItem:{info:{color:"rgba(255, 255, 255, 0.5)",borderTopColor:"black",background:"#2F3136",boxShadow:"0px 10px 36px -10px rgba(0,0,0,0.75)",borderRadius:0,border:0,bottom:"10px",fontSize:"1.2rem"}},Action:{info:{backgroundColor:"#FEC131",color:"#1E2124"}},Dismiss:{info:{color:"rgba(255, 255, 255, 0.5)",background:"transparent"}},Title:{info:{color:"white",fontSize:"2.2rem",fontWeight:"normal"}}};e.notificationStyle=n;var o="#1E2124";e.gray=o;var i="#131415";e.darkGray=i;var r="#2F3136";e.lightGray=r;var a="#FEC131";e.orange=a},347:function(t,e){"use strict";!function(){function t(e){return this instanceof t?(this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new t(e)}t.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,e){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=e||15;var n=this._circle=document.createElement("canvas"),o=n.getContext("2d"),i=this._r=t+e;return n.width=n.height=2*i,o.shadowOffsetX=o.shadowOffsetY=200,o.shadowBlur=e,o.shadowColor="black",o.beginPath(),o.arc(i-200,i-200,t,0,2*Math.PI,!0),o.closePath(),o.fill(),this},gradient:function(t){
var e=document.createElement("canvas"),n=e.getContext("2d"),o=n.createLinearGradient(0,0,0,256);e.width=1,e.height=256;for(var i in t)o.addColorStop(i,t[i]);return n.fillStyle=o,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var n,o=0,i=this._data.length;i>o;o++)n=this._data[o],e.globalAlpha=Math.max(n[2]/this._max,t||.05),e.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var n,o=3,i=t.length;i>o;o+=4)n=4*t[o],n&&(t[o-3]=e[n],t[o-2]=e[n+1],t[o-1]=e[n+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var n=this._map.getSize();t.width=n.x,t.height=n.y;var o=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(o?"animated":"hide")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var t,e,n,o,i,r,a,s,l,u=[],p=this._heat._r,c=this._map.getSize(),d=new L.Bounds(L.point([-p,-p]),c.add([p,p])),h=void 0===this.options.max?1:this.options.max,f=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,m=(1/Math.pow(2,Math.max(0,Math.min(f-this._map.getZoom(),12))),p/2),y=[],_=this._map._getMapPanePos(),g=_.x%m,v=_.y%m;for(t=0,e=this._latlngs.length;e>t;t++)if(n=this._map.latLngToContainerPoint(this._latlngs[t]),d.contains(n)){i=Math.floor((n.x-g)/m)+2,r=Math.floor((n.y-v)/m)+2;var w=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;l=w,y[r]=y[r]||[],o=y[r][i],o?(o[0]=(o[0]*o[2]+n.x*l)/(o[2]+l),o[1]=(o[1]*o[2]+n.y*l)/(o[2]+l),o[2]+=l):y[r][i]=[n.x,n.y,l]}for(t=0,e=y.length;e>t;t++)if(y[t])for(a=0,s=y[t].length;s>a;a++)o=y[t][a],o&&u.push([Math.round(o[0]),Math.round(o[1]),Math.min(o[2],h)]);this._heat.data(u).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,n,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(n)+" scale("+e+")"}}),L.heatLayer=function(t,e){return new L.HeatLayer(t,e)}},348:function(t,e,n){var o,i;!function(r,a,s){function l(){var t=r.L;u.noConflict=function(){return r.L=t,this},r.L=u}var u={version:"1.0.0-rc.1+e2caf40"};"object"==typeof t&&"object"==typeof t.exports?t.exports=u:n(1347)&&(o=u,i="function"==typeof o?o.call(e,n,e,t):o,!(void 0!==i&&(t.exports=i))),"undefined"!=typeof r&&l(),u.Util={extend:function(t){var e,n,o,i;for(n=1,o=arguments.length;o>n;n++){i=arguments[n];for(e in i)t[e]=i[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var o=n.call(arguments,2);return function(){return t.apply(e,o.length?o.concat(n.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++u.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,n){var o,i,r,a;return a=function(){o=!1,i&&(r.apply(n,i),i=!1)},r=function(){o?i=arguments:(t.apply(n,arguments),setTimeout(a,e),o=!0)}},wrapNum:function(t,e,n){var o=e[1],i=e[0],r=o-i;return t===o&&n?t:((t-i)%r+r)%r+i},falseFn:function(){return!1},formatNum:function(t,e){var n=Math.pow(10,e||5);return Math.round(t*n)/n},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return u.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?u.Util.create(t.options):{});for(var n in e)t.options[n]=e[n];return t.options},getParamString:function(t,e,n){var o=[];for(var i in t)o.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+o.join("&")},template:function(t,e){return t.replace(u.Util.templateRe,function(t,n){var o=e[n];if(o===s)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return r["webkit"+t]||r["moz"+t]||r["ms"+t]}function e(t){var e=+new Date,o=Math.max(0,16-(e-n));return n=e+o,r.setTimeout(t,o)}var n=0,o=r.requestAnimationFrame||t("RequestAnimationFrame")||e,i=r.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){r.clearTimeout(t)};u.Util.requestAnimFrame=function(t,n,i){return i&&o===e?void t.call(n):o.call(r,u.bind(t,n))},u.Util.cancelAnimFrame=function(t){t&&i.call(r,t)}}(),u.extend=u.Util.extend,u.bind=u.Util.bind,u.stamp=u.Util.stamp,u.setOptions=u.Util.setOptions,u.Class=function(){},u.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=u.Util.create(n);o.constructor=e,e.prototype=o;for(var i in this)this.hasOwnProperty(i)&&"prototype"!==i&&(e[i]=this[i]);return t.statics&&(u.extend(e,t.statics),delete t.statics),t.includes&&(u.Util.extend.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=u.Util.extend(u.Util.create(o.options),t.options)),u.extend(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;e>t;t++)o._initHooks[t].call(this)}},e},u.Class.include=function(t){return u.extend(this.prototype,t),this},u.Class.mergeOptions=function(t){return u.extend(this.prototype.options,t),this},u.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this},u.Evented=u.Class.extend({on:function(t,e,n){if("object"==typeof t)for(var o in t)this._on(o,t[o],e);else{t=u.Util.splitWords(t);for(var i=0,r=t.length;r>i;i++)this._on(t[i],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var o in t)this._off(o,t[o],e);else{t=u.Util.splitWords(t);for(var i=0,r=t.length;r>i;i++)this._off(t[i],e,n)}else delete this._events;return this},_on:function(t,e,n){var o=this._events=this._events||{},i=n&&n!==this&&u.stamp(n);if(i){var r=t+"_idx",a=t+"_len",s=o[r]=o[r]||{},l=u.stamp(e)+"_"+i;s[l]||(s[l]={fn:e,ctx:n},o[a]=(o[a]||0)+1)}else o[t]=o[t]||[],o[t].push({fn:e})},_off:function(t,e,n){var o,i,r,a,s=this._events,l=t+"_idx",p=t+"_len";if(s){if(!e){i=s[l];for(r in i)i[r].fn=u.Util.falseFn;for(i=s[t]||[],r=0,a=i.length;a>r;r++)i[r].fn=u.Util.falseFn;return delete s[t],delete s[l],void delete s[p]}var c,d=n&&n!==this&&u.stamp(n);if(d)c=u.stamp(e)+"_"+d,i=s[l],i&&i[c]&&(o=i[c],delete i[c],s[p]--);else if(i=s[t])for(r=0,a=i.length;a>r;r++)if(i[r].fn===e){o=i[r],i.splice(r,1);break}o&&(o.fn=u.Util.falseFn)}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=u.Util.extend({},e,{type:t,target:this}),i=this._events;if(i){var r,a,s,l,p=i[t+"_idx"];if(i[t])for(s=i[t].slice(),r=0,a=s.length;a>r;r++)s[r].fn.call(this,o);for(l in p)p[l].fn.call(p[l].ctx,o)}return n&&this._propagateEvent(o),this},listens:function(t,e){var n=this._events;if(n&&(n[t]||n[t+"_len"]))return!0;if(e)for(var o in this._eventParents)if(this._eventParents[o].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],e);return this}var i=u.bind(function(){this.off(t,e,n).off(t,i,n)},this);return this.on(t,e,n).on(t,i,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[u.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[u.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u.extend({layer:t.target},t),!0)}});var p=u.Evented.prototype;p.addEventListener=p.on,p.removeEventListener=p.clearAllEventListeners=p.off,p.addOneTimeEventListener=p.once,p.fireEvent=p.fire,p.hasEventListeners=p.listens,u.Mixin={Events:p},function(){var t=navigator.userAgent.toLowerCase(),e=a.documentElement,n="ActiveXObject"in r,o=-1!==t.indexOf("webkit"),i=-1!==t.indexOf("phantom"),s=-1!==t.search("android [23]"),l=-1!==t.indexOf("chrome"),p=-1!==t.indexOf("gecko")&&!o&&!r.opera&&!n,c=0===navigator.platform.indexOf("Win"),d="undefined"!=typeof orientation||-1!==t.indexOf("mobile"),h=!r.PointerEvent&&r.MSPointerEvent,f=r.PointerEvent||h,m=n&&"transition"in e.style,y="WebKitCSSMatrix"in r&&"m11"in new r.WebKitCSSMatrix&&!s,_="MozPerspective"in e.style,g="OTransition"in e.style,v=!r.L_NO_TOUCH&&(f||"ontouchstart"in r||r.DocumentTouch&&a instanceof r.DocumentTouch);u.Browser={ie:n,ielt9:n&&!a.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in a),webkit:o,gecko:p,android:-1!==t.indexOf("android"),android23:s,chrome:l,safari:!l&&-1!==t.indexOf("safari"),win:c,ie3d:m,webkit3d:y,gecko3d:_,opera12:g,any3d:!r.L_DISABLE_3D&&(m||y||_)&&!g&&!i,mobile:d,mobileWebkit:d&&o,mobileWebkit3d:d&&y,mobileOpera:d&&r.opera,mobileGecko:d&&p,touch:!!v,msPointer:!!h,pointer:!!f,retina:(r.devicePixelRatio||r.screen.deviceXDPI/r.screen.logicalXDPI)>1}}(),u.Point=function(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e},u.Point.prototype={clone:function(){return new u.Point(this.x,this.y)},add:function(t){return this.clone()._add(u.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(u.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new u.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new u.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=u.point(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=u.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=u.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u.Util.formatNum(this.x)+", "+u.Util.formatNum(this.y)+")"}},u.point=function(t,e,n){return t instanceof u.Point?t:u.Util.isArray(t)?new u.Point(t[0],t[1]):t===s||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new u.Point(t.x,t.y):new u.Point(t,e,n)},u.Bounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;i>o;o++)this.extend(n[o])},u.Bounds.prototype={extend:function(t){return t=u.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new u.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new u.Point(this.min.x,this.max.y)},getTopRight:function(){return new u.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return t="number"==typeof t[0]||t instanceof u.Point?u.point(t):u.bounds(t),t instanceof u.Bounds?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=u.bounds(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>=e.x&&o.x<=n.x,a=i.y>=e.y&&o.y<=n.y;return r&&a},overlaps:function(t){t=u.bounds(t);var e=this.min,n=this.max,o=t.min,i=t.max,r=i.x>e.x&&o.x<n.x,a=i.y>e.y&&o.y<n.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},u.bounds=function(t,e){return!t||t instanceof u.Bounds?t:new u.Bounds(t,e)},u.Transformation=function(t,e,n,o){this._a=t,this._b=e,this._c=n,this._d=o},u.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new u.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},u.DomUtil={get:function(t){return"string"==typeof t?a.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&a.defaultView){var o=a.defaultView.getComputedStyle(t,null);n=o?o[e]:null}return"auto"===n?null:n},create:function(t,e,n){var o=a.createElement(t);return o.className=e||"",n&&n.appendChild(o),o},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==s)return t.classList.contains(e);var n=u.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==s)for(var n=u.Util.splitWords(e),o=0,i=n.length;i>o;o++)t.classList.add(n[o]);else if(!u.DomUtil.hasClass(t,e)){var r=u.DomUtil.getClass(t);u.DomUtil.setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==s?t.classList.remove(e):u.DomUtil.setClass(t,u.Util.trim((" "+u.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===s?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===s?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&u.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var n=!1,o="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(o)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+o+"(opacity="+e+")"},testProp:function(t){for(var e=a.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,n){var o=e||new u.Point(0,0);t.style[u.DomUtil.TRANSFORM]=(u.Browser.ie3d?"translate("+o.x+"px,"+o.y+"px)":"translate3d("+o.x+"px,"+o.y+"px,0)")+(n?" scale("+n+")":"")},setPosition:function(t,e){t._leaflet_pos=e,u.Browser.any3d?u.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new u.Point(0,0)}},function(){u.DomUtil.TRANSFORM=u.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var t=u.DomUtil.TRANSITION=u.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(u.DomUtil.TRANSITION_END="webkitTransition"===t||"OTransition"===t?t+"End":"transitionend","onselectstart"in a)u.DomUtil.disableTextSelection=function(){u.DomEvent.on(r,"selectstart",u.DomEvent.preventDefault)},u.DomUtil.enableTextSelection=function(){u.DomEvent.off(r,"selectstart",u.DomEvent.preventDefault)};else{var e=u.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);u.DomUtil.disableTextSelection=function(){if(e){var t=a.documentElement.style;this._userSelect=t[e],t[e]="none"}},u.DomUtil.enableTextSelection=function(){e&&(a.documentElement.style[e]=this._userSelect,delete this._userSelect)}}u.DomUtil.disableImageDrag=function(){u.DomEvent.on(r,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.enableImageDrag=function(){u.DomEvent.off(r,"dragstart",u.DomEvent.preventDefault)},u.DomUtil.preventOutline=function(t){for(;-1===t.tabIndex;)t=t.parentNode;t&&t.style&&(u.DomUtil.restoreOutline(),this._outlineElement=t,this._outlineStyle=t.style.outline,t.style.outline="none",u.DomEvent.on(r,"keydown",u.DomUtil.restoreOutline,this))},u.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,u.DomEvent.off(r,"keydown",u.DomUtil.restoreOutline,this))}}(),u.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==s&&(this.alt=+n)},u.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=u.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return(e===s?1e-9:e)>=n},toString:function(t){return"LatLng("+u.Util.formatNum(this.lat,t)+", "+u.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return u.CRS.Earth.distance(this,u.latLng(t))},wrap:function(){return u.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return u.latLngBounds([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new u.LatLng(this.lat,this.lng,this.alt)}},u.latLng=function(t,e,n){return t instanceof u.LatLng?t:u.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new u.LatLng(t[0],t[1],t[2]):2===t.length?new u.LatLng(t[0],t[1]):null:t===s||null===t?t:"object"==typeof t&&"lat"in t?new u.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===s?null:new u.LatLng(t,e,n)},u.LatLngBounds=function(t,e){if(t)for(var n=e?[t,e]:t,o=0,i=n.length;i>o;o++)this.extend(n[o])},u.LatLngBounds.prototype={extend:function(t){var e,n,o=this._southWest,i=this._northEast;if(t instanceof u.LatLng)e=t,n=t;else{if(!(t instanceof u.LatLngBounds))return t?this.extend(u.latLng(t)||u.latLngBounds(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return o||i?(o.lat=Math.min(e.lat,o.lat),o.lng=Math.min(e.lng,o.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new u.LatLng(e.lat,e.lng),this._northEast=new u.LatLng(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,o=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new u.LatLngBounds(new u.LatLng(e.lat-o,e.lng-i),new u.LatLng(n.lat+o,n.lng+i))},getCenter:function(){return new u.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new u.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new u.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof u.LatLng?u.latLng(t):u.latLngBounds(t);var e,n,o=this._southWest,i=this._northEast;return t instanceof u.LatLngBounds?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=o.lat&&n.lat<=i.lat&&e.lng>=o.lng&&n.lng<=i.lng},intersects:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>=e.lat&&o.lat<=n.lat,a=i.lng>=e.lng&&o.lng<=n.lng;return r&&a},overlaps:function(t){t=u.latLngBounds(t);var e=this._southWest,n=this._northEast,o=t.getSouthWest(),i=t.getNorthEast(),r=i.lat>e.lat&&o.lat<n.lat,a=i.lng>e.lng&&o.lng<n.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=u.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},u.latLngBounds=function(t,e){return t instanceof u.LatLngBounds?t:new u.LatLngBounds(t,e)},u.Projection={},u.Projection.LonLat={project:function(t){return new u.Point(t.lng,t.lat)},unproject:function(t){return new u.LatLng(t.y,t.x)},bounds:u.bounds([-180,-90],[180,90])},u.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,o=Math.max(Math.min(n,t.lat),-n),i=Math.sin(o*e);return new u.Point(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new u.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return u.bounds([-t,-t],[t,t])}()},u.CRS={latLngToPoint:function(t,e){var n=this.projection.project(t),o=this.scale(e);return this.transformation._transform(n,o)},pointToLatLng:function(t,e){var n=this.scale(e),o=this.transformation.untransform(t,n);return this.projection.unproject(o)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),o=this.transformation.transform(e.min,n),i=this.transformation.transform(e.max,n);return u.bounds(o,i)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?u.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,o=t.alt;return u.latLng(n,e,o)}},u.CRS.Simple=u.extend({},u.CRS,{projection:u.Projection.LonLat,transformation:new u.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,o=e.lat-t.lat;return Math.sqrt(n*n+o*o)},infinite:!0}),u.CRS.Earth=u.extend({},u.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,o=t.lat*n,i=e.lat*n,r=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return this.R*Math.acos(Math.min(r,1))}}),u.CRS.EPSG3857=u.extend({},u.CRS.Earth,{code:"EPSG:3857",projection:u.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*u.Projection.SphericalMercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.CRS.EPSG900913=u.extend({},u.CRS.EPSG3857,{code:"EPSG:900913"}),u.CRS.EPSG4326=u.extend({},u.CRS.Earth,{code:"EPSG:4326",projection:u.Projection.LonLat,transformation:new u.Transformation(1/180,1,-1/180,.5)}),u.Map=u.Evented.extend({options:{crs:u.CRS.EPSG3857,center:s,zoom:s,minZoom:s,maxZoom:s,layers:[],maxBounds:s,renderer:s,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=u.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=u.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==s&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==s&&this.setView(u.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(t,e){return e=e===s?this.getZoom():e,this._resetView(u.latLng(t),e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(u.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var o=this.getZoomScale(e),i=this.getSize().divideBy(2),r=t instanceof u.Point?t:this.latLngToContainerPoint(t),a=r.subtract(i).multiplyBy(1-1/o),s=this.containerPointToLatLng(i.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():u.latLngBounds(t);var n=u.point(e.paddingTopLeft||e.padding||[0,0]),o=u.point(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(o));i="number"==typeof e.maxZoom?Math.min(e.maxZoom,i):i;var r=o.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i),l=this.unproject(a.add(s).divideBy(2).add(r),i);return{center:l,zoom:i}},fitBounds:function(t,e){if(t=u.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(u.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=u.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),o=this._limitCenter(n,this._zoom,u.latLngBounds(t));return n.equals(o)||this.panTo(o,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=u.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),o=e.divideBy(2).round(),i=n.divideBy(2).round(),r=o.subtract(i);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(t){this._container._leaflet=s}u.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var e in this._layers)this._layers[e].remove();return this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),o=u.DomUtil.create("div",n,e||this._mapPane);return t&&(this._panes[t]=o),o},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new u.LatLngBounds(e,n)},getMinZoom:function(){return this.options.minZoom===s?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===s?this._layersMaxZoom===s?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=u.latLngBounds(t),n=u.point(n||[0,0]);var o=this.getZoom()||0,i=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(n),p=this.project(s,o).subtract(this.project(a,o)),c=u.Browser.any3d?this.options.zoomSnap:1,d=Math.min(l.x/p.x,l.y/p.y);return o=this.getScaleZoom(d,o),c&&(o=Math.round(o/(c/100))*(c/100),o=e?Math.ceil(o/c)*c:Math.floor(o/c)*c),Math.max(i,Math.min(r,o))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new u.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new u.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===s?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===s?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;return e=e===s?this._zoom:e,n.zoom(t*n.scale(e))},project:function(t,e){return e=e===s?this._zoom:e,this.options.crs.latLngToPoint(u.latLng(t),e)},unproject:function(t,e){return e=e===s?this._zoom:e,this.options.crs.pointToLatLng(u.point(t),e)},layerPointToLatLng:function(t){var e=u.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(u.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(u.latLng(t))},distance:function(t,e){return this.options.crs.distance(u.latLng(t),u.latLng(e))},containerPointToLayerPoint:function(t){return u.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return u.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(u.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(u.latLng(t)))},mouseEventToContainerPoint:function(t){return u.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=u.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");u.DomEvent.addListener(e,"scroll",this._onScroll,this),e._leaflet=!0},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&u.Browser.any3d,u.DomUtil.addClass(t,"leaflet-container"+(u.Browser.touch?" leaflet-touch":"")+(u.Browser.retina?" leaflet-retina":"")+(u.Browser.ielt9?" leaflet-oldie":"")+(u.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));
var e=u.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),u.DomUtil.setPosition(this._mapPane,new u.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(u.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),u.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){u.DomUtil.setPosition(this._mapPane,new u.Point(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var o=this._zoom!==e;this._moveStart(o)._move(t,e)._moveEnd(o),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===s&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return u.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){u.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){if(u.DomEvent){this._targets={},this._targets[u.stamp(this._container)]=this;var e=t?"off":"on";u.DomEvent[e](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&u.DomEvent[e](r,"resize",this._onResize,this),u.Browser.any3d&&this.options.transform3DLimit&&this[e]("moveend",this._onMoveEnd)}},_onResize:function(){u.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=u.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,o=[],i="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if(n=this._targets[u.stamp(r)],n&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!u.DomEvent._isExternalTarget(r,t))break;if(o.push(n),i)break}if(r===this._container)break;r=r.parentNode}return o.length||a||i||!u.DomEvent._isExternalTarget(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!u.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&u.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=u.Util.extend({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e)),n.length)){var i=n[0];"contextmenu"===e&&i.listens(e,!0)&&u.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=i instanceof u.Marker;r.containerPoint=a?this.latLngToContainerPoint(i.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?i.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,r,!0),r.originalEvent._stopped||n[s].options.nonBubblingEvents&&-1!==u.Util.indexOf(n[s].options.nonBubblingEvents,e))return}},_draggableMoved:function(t){return t=t.options.draggable?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return u.DomUtil.getPosition(this._mapPane)||new u.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==s?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var o=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(o)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var o=this.project(t,e),i=this.getSize().divideBy(2),r=new u.Bounds(o.subtract(i),o.add(i)),a=this._getBoundsOffset(r,n,e);return a.round().equals([0,0])?t:this.unproject(o.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),o=new u.Bounds(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(o,e))},_getBoundsOffset:function(t,e,n){var o=u.bounds(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=o.min.subtract(t.min),r=o.max.subtract(t.max),a=this._rebound(i.x,-r.x),s=this._rebound(i.y,-r.y);return new u.Point(a,s)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),o=u.Browser.any3d?this.options.zoomSnap:1;return o&&(t=Math.round(t/o)*o),Math.max(e,Math.min(n,t))}}),u.map=function(t,e){return new u.Map(t,e)},u.Layer=u.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[u.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[u.stamp(t)],this},_layerAdd:function(t){var e=t.target;e.hasLayer(this)&&(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents&&e.on(this.getEvents(),this),this.onAdd(e),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this}))}}),u.Map.include({addLayer:function(t){var e=u.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=u.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),t.getEvents&&this.off(t.getEvents(),t),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&u.stamp(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?u.Util.isArray(t)?t:[t]:[];for(var e=0,n=t.length;n>e;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[u.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=u.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var i=this._zoomBoundLayers[o].options;t=i.minZoom===s?t:Math.min(t,i.minZoom),e=i.maxZoom===s?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-(1/0)?s:e,this._layersMinZoom=t===1/0?s:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),u.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:u.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,o=t.lat*e,i=this.R_MINOR/n,r=Math.sqrt(1-i*i),a=r*Math.sin(o),s=Math.tan(Math.PI/4-o/2)/Math.pow((1-a)/(1+a),r/2);return o=-n*Math.log(Math.max(s,1e-10)),new u.Point(t.lng*e*n,o)},unproject:function(t){for(var e,n=180/Math.PI,o=this.R,i=this.R_MINOR/o,r=Math.sqrt(1-i*i),a=Math.exp(-t.y/o),s=Math.PI/2-2*Math.atan(a),l=0,p=.1;15>l&&Math.abs(p)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),p=Math.PI/2-2*Math.atan(a*e)-s,s+=p;return new u.LatLng(s*n,t.x*n/o)}},u.CRS.EPSG3395=u.extend({},u.CRS.Earth,{code:"EPSG:3395",projection:u.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*u.Projection.Mercator.R);return new u.Transformation(t,.5,-t,.5)}()}),u.GridLayer=u.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:u.Browser.mobile,updateWhenZooming:!0,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:s,noWrap:!1,pane:"tilePane",className:""},initialize:function(t){t=u.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),u.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(u.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(u.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return a.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof u.Point?t:new u.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==s&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,o=-t(-(1/0),1/0),i=0,r=n.length;r>i;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(o=t(o,+e));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!u.Browser.ielt9){u.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var o in this._tiles){var i=this._tiles[o];if(i.current&&i.loaded){var r=Math.min(1,(t-i.loaded)/200);u.DomUtil.setOpacity(i.el,r),1>r?e=!0:(i.active&&(n=!0),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=u.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===s)return s;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(u.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var o=this._levels[t],i=this._map;return o||(o=this._levels[t]={},o.el=u.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),o.el.style.zIndex=e,o.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),o.zoom=t,this._setZoomTransform(o,i.getCenter(),i.getZoom()),u.Util.falseFn(o.el.offsetWidth)),this._level=o,o},_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var o=e.coords;this._retainParent(o.x,o.y,o.z,o.z-5)||this._retainChildren(o.x,o.y,o.z,o.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)u.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,n,o){var i=Math.floor(t/2),r=Math.floor(e/2),a=n-1,s=new u.Point(+i,+r);s.z=+a;var l=this._tileCoordsToKey(s),p=this._tiles[l];return p&&p.active?(p.retain=!0,!0):(p&&p.loaded&&(p.retain=!0),a>o?this._retainParent(i,r,a,o):!1)},_retainChildren:function(t,e,n,o){for(var i=2*t;2*t+2>i;i++)for(var r=2*e;2*e+2>r;r++){var a=new u.Point(i,r);a.z=n+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),o>n+1&&this._retainChildren(i,r,n+1,o))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,o){var i=Math.round(e);(this.options.maxZoom!==s&&i>this.options.maxZoom||this.options.minZoom!==s&&i<this.options.minZoom)&&(i=s);var r=this.options.updateWhenZooming&&i!==this._tileZoom;o&&!r||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==s&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var o=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(e,n)).round();u.Browser.any3d?u.DomUtil.setTransform(t.el,i,o):u.DomUtil.setPosition(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),o=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],o).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],o).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],o).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],o).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._resetView()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),o=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*o);return new u.Bounds(i.subtract(r),i.add(r))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(t===s&&(t=e.getCenter()),this._tileZoom!==s){var o=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(o),r=i.getCenter(),l=[];for(var p in this._tiles)this._tiles[p].current=!1;if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var c=i.min.y;c<=i.max.y;c++)for(var d=i.min.x;d<=i.max.x;d++){var h=new u.Point(d,c);if(h.z=this._tileZoom,this._isValidTile(h)){var f=this._tiles[this._tileCoordsToKey(h)];f?f.current=!0:l.push(h)}}if(l.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var m=a.createDocumentFragment();for(d=0;d<l.length;d++)this._addTile(l[d],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var o=this._tileCoordsToBounds(t);return u.latLngBounds(this.options.bounds).overlaps(o)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,n=this.getTileSize(),o=t.scaleBy(n),i=o.add(n),r=e.wrapLatLng(e.unproject(o,t.z)),a=e.wrapLatLng(e.unproject(i,t.z));return new u.LatLngBounds(r,a)},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new u.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(u.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){u.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,u.Browser.ielt9&&this.options.opacity<1&&u.DomUtil.setOpacity(t,this.options.opacity),u.Browser.android&&!u.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),i=this.createTile(this._wrapCoords(t),u.bind(this._tileReady,this,t));this._initTile(i),this.createTile.length<2&&u.Util.requestAnimFrame(u.bind(this._tileReady,this,t,null,i)),u.DomUtil.setPosition(i,n),this._tiles[o]={el:i,coords:t,current:!0},e.appendChild(i),this.fire("tileloadstart",{tile:i,coords:t})},_tileReady:function(t,e,n){if(this._map){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var o=this._tileCoordsToKey(t);n=this._tiles[o],n&&(n.loaded=+new Date,this._map._fadeAnimated?(u.DomUtil.setOpacity(n.el,0),u.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=u.Util.requestAnimFrame(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),u.DomUtil.addClass(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),u.Browser.ielt9||!this._map._fadeAnimated?u.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(u.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new u.Point(this._wrapX?u.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?u.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new u.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),u.gridLayer=function(t){return new u.GridLayer(t)},u.TileLayer=u.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=u.setOptions(this,e),e.detectRetina&&u.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),u.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=a.createElement("img");return u.DomEvent.on(n,"load",u.bind(this._tileOnLoad,this,e,n)),u.DomEvent.on(n,"error",u.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:u.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return u.Util.template(this._url,u.extend(e,this.options))},_tileOnLoad:function(t,e){u.Browser.ielt9?setTimeout(u.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var o=this.options.errorTileUrl;o&&(e.src=o),t(n,e)},getTileSize:function(){var t=this._map,e=u.GridLayer.prototype.getTileSize.call(this),n=this._tileZoom+this.options.zoomOffset,o=this.options.maxNativeZoom;return null!==o&&n>o?e.divideBy(t.getZoomScale(o,n)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this.options,e=this._tileZoom;return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,null!==t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=u.Util.falseFn,e.onerror=u.Util.falseFn,e.complete||(e.src=u.Util.emptyImageUrl,u.DomUtil.remove(e)))}}),u.tileLayer=function(t,e){return new u.TileLayer(t,e)},u.TileLayer.WMS=u.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=u.extend({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);e=u.setOptions(this,e),n.width=n.height=e.tileSize*(e.detectRetina&&u.Browser.retina?2:1),this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,u.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),n=this._crs.project(e.getNorthWest()),o=this._crs.project(e.getSouthEast()),i=(this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[o.y,n.x,n.y,o.x]:[n.x,o.y,o.x,n.y]).join(","),r=u.TileLayer.prototype.getTileUrl.call(this,t);return r+u.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+i},setParams:function(t,e){return u.extend(this.wmsParams,t),e||this.redraw(),this}}),u.tileLayer.wms=function(t,e){return new u.TileLayer.WMS(t,e)},u.ImageOverlay=u.Layer.extend({options:{opacity:1,alt:"",interactive:!1,attribution:null,crossOrigin:!1},initialize:function(t,e,n){this._url=t,this._bounds=u.latLngBounds(e),u.setOptions(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(u.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){u.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=u.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=u.Util.falseFn,t.onmousemove=u.Util.falseFn,t.onload=u.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),t.zoom,t.center);u.DomUtil.setTransform(this._image,n,e)},_reset:function(){var t=this._image,e=new u.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();u.DomUtil.setPosition(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){u.DomUtil.setOpacity(this._image,this.options.opacity)}}),u.imageOverlay=function(t,e,n){return new u.ImageOverlay(t,e,n)},u.Icon=u.Class.extend({initialize:function(t){u.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var o=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(o,t),o},_setIconStyles:function(t,e){var n=this.options,o=n[e+"Size"];"number"==typeof o&&(o=[o,o]);var i=u.point(o),r=u.point("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return e=e||a.createElement("img"),e.src=t,e},_getIconUrl:function(t){return u.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),u.icon=function(t){return new u.Icon(t)},u.Icon.Default=u.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];var n=u.Icon.Default.imagePath;if(!n)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return n+"/marker-"+t+(u.Browser.retina&&"icon"===t?"-2x":"")+".png"}}),u.Icon.Default.imagePath=function(){var t,e,n,o,i=a.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,e=i.length;e>t;t++)if(n=i[t].src||"",n.match(r))return o=n.split(r)[0],(o?o+"/":"")+"images"}(),u.Marker=u.Layer.extend({options:{icon:new u.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._removeIcon(),this._removeShadow()},getEvents:function(){var t={zoom:this.update,viewreset:this.update};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=u.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),o=!1;n!==this._icon&&(this._icon&&this._removeIcon(),o=!0,t.title&&(n.title=t.title),t.alt&&(n.alt=t.alt)),u.DomUtil.addClass(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),r=!1;i!==this._shadow&&(this._removeShadow(),r=!0),i&&u.DomUtil.addClass(i,e),this._shadow=i,t.opacity<1&&this._updateOpacity(),o&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),u.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&u.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){u.DomUtil.setPosition(this._icon,t),this._shadow&&u.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(u.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),u.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new u.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;u.DomUtil.setOpacity(this._icon,t),this._shadow&&u.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),u.marker=function(t,e){return new u.Marker(t,e)},u.DivIcon=u.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:a.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var o=u.point(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),u.divIcon=function(t){return new u.DivIcon(t)},u.Map.mergeOptions({closePopupOnClick:!0}),u.Popup=u.Layer.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,offset:[0,7],autoClose:!0,zoomAnimation:!0,className:"",pane:"popupPane"},initialize:function(t,e){u.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&u.DomUtil.setOpacity(this._container,1),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source.on("preclick",u.DomEvent.stopPropagation))},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._fadeAnimated?(u.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(u.bind(u.DomUtil.remove,u.DomUtil,this._container),200)):u.DomUtil.remove(this._container),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source.off("preclick",u.DomEvent.stopPropagation))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=u.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",
this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&u.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&u.DomUtil.toBack(this._container),this},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=u.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var n=this._closeButton=u.DomUtil.create("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",u.DomEvent.on(n,"click",this._onCloseButtonClick,this)}var o=this._wrapper=u.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=u.DomUtil.create("div",t+"-content",o),u.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,"contextmenu",u.DomEvent.stopPropagation),this._tipContainer=u.DomUtil.create("div",t+"-tip-container",e),this._tip=u.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var o=t.offsetHeight,i=this.options.maxHeight,r="leaflet-popup-scrolled";i&&o>i?(e.height=i+"px",u.DomUtil.addClass(t,r)):u.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=u.point(this.options.offset);this._zoomAnimated?u.DomUtil.setPosition(this._container,t):e=e.add(t);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);u.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=this._container.offsetHeight,n=this._containerWidth,o=new u.Point(this._containerLeft,-e-this._containerBottom);this._zoomAnimated&&o._add(u.DomUtil.getPosition(this._container));var i=t.layerPointToContainerPoint(o),r=u.point(this.options.autoPanPadding),a=u.point(this.options.autoPanPaddingTopLeft||r),s=u.point(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),p=0,c=0;i.x+n+s.x>l.x&&(p=i.x+n-l.x+s.x),i.x-p-a.x<0&&(p=i.x-a.x),i.y+e+s.y>l.y&&(c=i.y+e-l.y+s.y),i.y-c-a.y<0&&(c=i.y-a.y),(p||c)&&t.fire("autopanstart").panBy([p,c])}},_onCloseButtonClick:function(t){this._close(),u.DomEvent.stop(t)}}),u.popup=function(t,e){return new u.Popup(t,e)},u.Map.include({openPopup:function(t,e,n){return t instanceof u.Popup||(t=new u.Popup(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),u.Layer.include({bindPopup:function(t,e){return t instanceof u.Popup?(u.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new u.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this._originalPopupOffset=this._popup.options.offset,this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof u.Layer||(e=t,t=this),t instanceof u.FeatureGroup)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup.options.offset=this._popupAnchor(t),this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;return this._popup&&this._map?(u.DomEvent.stop(t),e instanceof u.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))):void 0},_popupAnchor:function(t){var e=t._getPopupAnchor?t._getPopupAnchor():[0,0],n=this._originalPopupOffset||u.Popup.prototype.options.offset;return u.point(e).add(n)},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),u.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),u.LayerGroup=u.Layer.extend({initialize:function(t){this._layers={};var e,n;if(t)for(e=0,n=t.length;n>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,n,o=Array.prototype.slice.call(arguments,1);for(e in this._layers)n=this._layers[e],n[t]&&n[t].apply(n,o);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return u.stamp(t)}}),u.layerGroup=function(t){return new u.LayerGroup(t)},u.FeatureGroup=u.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),u.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),u.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new u.LatLngBounds;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),u.featureGroup=function(t){return new u.FeatureGroup(t)},u.Renderer=u.Layer.extend({options:{padding:.1},initialize:function(t){u.setOptions(this,t),u.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&u.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){u.DomUtil.remove(this._container)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),o=u.DomUtil.getPosition(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(r),l=i.multiplyBy(-n).add(o).add(i).subtract(s);u.Browser.any3d?u.DomUtil.setTransform(this._container,l,n):u.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new u.Bounds(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),u.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&u.canvas()||u.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===s)return!1;var e=this._paneRenderers[t];return e===s&&(e=u.SVG&&u.svg({pane:t})||u.Canvas&&u.canvas({pane:t}),this._paneRenderers[t]=e),e}}),u.Path=u.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return u.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(u.Browser.touch?10:0)}}),u.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=this._reducePoints(t,n),t=this._simplifyDP(t,n)},pointToSegmentDistance:function(t,e,n){return Math.sqrt(this._sqClosestPointOnSegment(t,e,n,!0))},closestPointOnSegment:function(t,e,n){return this._sqClosestPointOnSegment(t,e,n)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=s+""?Uint8Array:Array,i=new o(n);i[0]=i[n-1]=1,this._simplifyDPStep(t,i,e,0,n-1);var r,a=[];for(r=0;n>r;r++)i[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,n,o,i){var r,a,s,l=0;for(a=o+1;i-1>=a;a++)s=this._sqClosestPointOnSegment(t[a],t[o],t[i],!0),s>l&&(r=a,l=s);l>n&&(e[r]=1,this._simplifyDPStep(t,e,n,o,r),this._simplifyDPStep(t,e,n,r,i))},_reducePoints:function(t,e){for(var n=[t[0]],o=1,i=0,r=t.length;r>o;o++)this._sqDist(t[o],t[i])>e&&(n.push(t[o]),i=o);return r-1>i&&n.push(t[r-1]),n},clipSegment:function(t,e,n,o,i){var r,a,s,l=o?this._lastCode:this._getBitCode(t,n),u=this._getBitCode(e,n);for(this._lastCode=u;;){if(!(l|u))return[t,e];if(l&u)return!1;r=l||u,a=this._getEdgeIntersection(t,e,r,n,i),s=this._getBitCode(a,n),r===l?(t=a,l=s):(e=a,u=s)}},_getEdgeIntersection:function(t,e,n,o,i){var r,a,s=e.x-t.x,l=e.y-t.y,p=o.min,c=o.max;return 8&n?(r=t.x+s*(c.y-t.y)/l,a=c.y):4&n?(r=t.x+s*(p.y-t.y)/l,a=p.y):2&n?(r=c.x,a=t.y+l*(c.x-t.x)/s):1&n&&(r=p.x,a=t.y+l*(p.x-t.x)/s),new u.Point(r,a,i)},_getBitCode:function(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n},_sqDist:function(t,e){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o},_sqClosestPointOnSegment:function(t,e,n,o){var i,r=e.x,a=e.y,s=n.x-r,l=n.y-a,p=s*s+l*l;return p>0&&(i=((t.x-r)*s+(t.y-a)*l)/p,i>1?(r=n.x,a=n.y):i>0&&(r+=s*i,a+=l*i)),s=t.x-r,l=t.y-a,o?s*s+l*l:new u.Point(r,a)}},u.Polyline=u.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){u.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,o=1/0,i=null,r=u.LineUtil._sqClosestPointOnSegment,a=0,s=this._parts.length;s>a;a++)for(var l=this._parts[a],p=1,c=l.length;c>p;p++){e=l[p-1],n=l[p];var d=r(t,e,n,!0);o>d&&(o=d,i=r(t,e,n))}return i&&(i.distance=Math.sqrt(o)),i},getCenter:function(){var t,e,n,o,i,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;l-1>t;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,o=0;l-1>t;t++)if(i=s[t],r=s[t+1],n=i.distanceTo(r),o+=n,o>e)return a=(o-e)/n,this._map.layerPointToLatLng([r.x-a*(r.x-i.x),r.y-a*(r.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=u.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new u.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return u.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=u.Polyline._flat(t),o=0,i=t.length;i>o;o++)n?(e[o]=u.latLng(t[o]),this._bounds.extend(e[o])):e[o]=this._convertLatLngs(t[o]);return e},_project:function(){var t=new u.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new u.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var o,i,r=t[0]instanceof u.LatLng,a=t.length;if(r){for(i=[],o=0;a>o;o++)i[o]=this._map.latLngToLayerPoint(t[o]),n.extend(i[o]);e.push(i)}else for(o=0;a>o;o++)this._projectLatlngs(t[o],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,n,o,i,r,a,s,l=this._parts;for(e=0,o=0,i=this._rings.length;i>e;e++)for(s=this._rings[e],n=0,r=s.length;r-1>n;n++)a=u.LineUtil.clipSegment(s[n],s[n+1],t,n,!0),a&&(l[o]=l[o]||[],l[o].push(a[0]),a[1]===s[n+1]&&n!==r-2||(l[o].push(a[1]),o++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,o=t.length;o>n;n++)t[n]=u.LineUtil.simplify(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),u.polyline=function(t,e){return new u.Polyline(t,e)},u.Polyline._flat=function(t){return!u.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},u.PolyUtil={},u.PolyUtil.clipPolygon=function(t,e,n){var o,i,r,a,s,l,p,c,d,h=[1,4,2,8],f=u.LineUtil;for(i=0,p=t.length;p>i;i++)t[i]._code=f._getBitCode(t[i],e);for(a=0;4>a;a++){for(c=h[a],o=[],i=0,p=t.length,r=p-1;p>i;r=i++)s=t[i],l=t[r],s._code&c?l._code&c||(d=f._getEdgeIntersection(l,s,c,e,n),d._code=f._getBitCode(d,e),o.push(d)):(l._code&c&&(d=f._getEdgeIntersection(l,s,c,e,n),d._code=f._getBitCode(d,e),o.push(d)),o.push(s));t=o}return t},u.Polygon=u.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var t,e,n,o,i,r,a,s,l,u=this._rings[0],p=u.length;if(!p)return null;for(r=a=s=0,t=0,e=p-1;p>t;e=t++)n=u[t],o=u[e],i=n.y*o.x-o.y*n.x,a+=(n.x+o.x)*i,s+=(n.y+o.y)*i,r+=3*i;return l=0===r?u[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=u.Polyline.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof u.LatLng&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){u.Polyline.prototype._setLatLngs.call(this,t),u.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new u.Point(e,e);if(t=new u.Bounds(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var o,i=0,r=this._rings.length;r>i;i++)o=u.PolyUtil.clipPolygon(this._rings[i],t,!0),o.length&&this._parts.push(o)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),u.polygon=function(t,e){return new u.Polygon(t,e)},u.Rectangle=u.Polygon.extend({initialize:function(t,e){u.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=u.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),u.rectangle=function(t,e){return new u.Rectangle(t,e)},u.CircleMarker=u.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){u.setOptions(this,e),this._latlng=u.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=u.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return u.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),o=[t+n,e+n];this._pxBounds=new u.Bounds(this._point.subtract(o),this._point.add(o))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),u.circleMarker=function(t,e){return new u.CircleMarker(t,e)},u.Circle=u.CircleMarker.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=u.extend({},n,{radius:e})),u.setOptions(this,e),this._latlng=u.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new u.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:u.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,o=n.options.crs;if(o.distance===u.CRS.Earth.distance){var i=Math.PI/180,r=this._mRadius/u.CRS.Earth.R/i,a=n.project([e+r,t]),s=n.project([e-r,t]),l=a.add(s).divideBy(2),p=n.unproject(l).lat,c=Math.acos((Math.cos(r*i)-Math.sin(e*i)*Math.sin(p*i))/(Math.cos(e*i)*Math.cos(p*i)))/i;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(l.x-n.project([p,t-c]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var d=o.unproject(o.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}}),u.circle=function(t,e,n){return new u.Circle(t,e,n)},u.SVG=u.Renderer.extend({getEvents:function(){var t=u.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=u.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=u.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){u.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),u.DomUtil.setPosition(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" "))}},_initPath:function(t){var e=t._path=u.SVG.create("path");t.options.className&&u.DomUtil.addClass(e,t.options.className),t.options.interactive&&u.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t)},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){u.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path)},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,u.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,n=t._radius,o=t._radiusY||n,i="a"+n+","+o+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){u.DomUtil.toFront(t._path)},_bringToBack:function(t){u.DomUtil.toBack(t._path)}}),u.extend(u.SVG,{create:function(t){return a.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var n,o,i,r,a,s,l="";for(n=0,i=t.length;i>n;n++){for(a=t[n],o=0,r=a.length;r>o;o++)s=a[o],l+=(o?"L":"M")+s.x+" "+s.y;l+=e?u.Browser.svg?"z":"x":""}return l||"M0 0"}}),u.Browser.svg=!(!a.createElementNS||!u.SVG.create("svg").createSVGRect),u.svg=function(t){return u.Browser.svg||u.Browser.vml?new u.SVG(t):null},u.Browser.vml=!u.Browser.svg&&function(){try{var t=a.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(n){return!1}}(),u.SVG.include(u.Browser.vml?{_initContainer:function(){this._container=u.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||u.Renderer.prototype._update.call(this)},_initPath:function(t){var e=t._container=u.SVG.create("shape");u.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=u.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t)},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;u.DomUtil.remove(e),t.removeInteractiveTarget(e)},_updateStyle:function(t){var e=t._stroke,n=t._fill,o=t.options,i=t._container;i.stroked=!!o.stroke,i.filled=!!o.fill,o.stroke?(e||(e=t._stroke=u.SVG.create("stroke")),i.appendChild(e),e.weight=o.weight+"px",e.color=o.color,e.opacity=o.opacity,o.dashArray?e.dashStyle=u.Util.isArray(o.dashArray)?o.dashArray.join(" "):o.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=o.lineCap.replace("butt","flat"),e.joinstyle=o.lineJoin):e&&(i.removeChild(e),t._stroke=null),o.fill?(n||(n=t._fill=u.SVG.create("fill")),i.appendChild(n),n.color=o.fillColor||o.color,n.opacity=o.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),o=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+o+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){u.DomUtil.toFront(t._container)},_bringToBack:function(t){u.DomUtil.toBack(t._container)}}:{}),u.Browser.vml&&(u.SVG.create=function(){try{return a.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return a.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return a.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),u.Canvas=u.Renderer.extend({onAdd:function(){u.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var t=this._container=a.createElement("canvas");u.DomEvent.on(t,"mousemove",u.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},u.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),o=u.Browser.retina?2:1;u.DomUtil.setPosition(e,t.min),e.width=o*n.x,e.height=o*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",u.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y)}},_initPath:function(t){this._updateDashArray(t),this._layers[u.stamp(t)]=t},_addPath:u.Util.falseFn,_removePath:function(t){t._removed=!0,this._requestRedraw(t)},_updatePath:function(t){this._redrawBounds=t._pxBounds,this._draw(!0),t._project(),t._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,n=t.options.dashArray.split(","),o=[];for(e=0;e<n.length;e++)o.push(Number(n[e]));t.options._dashArray=o}},_requestRedraw:function(t){if(this._map){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new u.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])),this._redrawRequest=this._redrawRequest||u.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(t){this._clear=t;var e,n=this._redrawBounds;this._ctx.save(),n&&(this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,n.max.x-n.min.x,n.max.y-n.min.y),this._ctx.clip());for(var o in this._layers)e=this._layers[o],n&&!e._pxBounds.intersects(n)||e._updatePath(),t&&e._removed&&(delete e._removed,delete this._layers[o]);this._ctx.restore()},_updatePoly:function(t,e){var n,o,i,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),n=0;s>n;n++){for(o=0,i=a[n].length;i>o;o++)r=a[n][o],l[o?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}},_updateCircle:function(t){if(!t._empty()){var e=t._point,n=this._ctx,o=t._radius,i=(t._radiusY||o)/o;this._drawnLayers[t._leaflet_id]=t,1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,o,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=this._clear,o=e.options;t.globalCompositeOperation=n?"destination-out":"source-over",o.fill&&(t.globalAlpha=n?1:o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&0!==o.weight&&(t.globalAlpha=n?1:o.opacity,e._prevWeight=t.lineWidth=n?e._prevWeight+1:o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){var e,n=this._map.mouseEventToLayerPoint(t),o=[];for(var i in this._layers)e=this._layers[i],e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(u.DomEvent._fakeStop(t),o.push(e));o.length&&this._fireEvent(o,t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseOut(t,e),this._handleMouseHover(t,e)}},_handleMouseOut:function(t,e){var n=this._hoveredLayer;!n||"mouseout"!==t.type&&n._containsPoint(e)||(u.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){var n,o;for(n in this._drawnLayers)o=this._drawnLayers[n],o.options.interactive&&o._containsPoint(e)&&(u.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredLayer=o);this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:u.Util.falseFn,_bringToBack:u.Util.falseFn}),u.Browser.canvas=function(){return!!a.createElement("canvas").getContext}(),u.canvas=function(t){return u.Browser.canvas?new u.Canvas(t):null},u.Polyline.prototype._containsPoint=function(t,e){var n,o,i,r,a,s,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(n=0,r=this._parts.length;r>n;n++)for(s=this._parts[n],o=0,a=s.length,i=a-1;a>o;i=o++)if((e||0!==o)&&u.LineUtil.pointToSegmentDistance(t,s[i],s[o])<=l)return!0;return!1},u.Polygon.prototype._containsPoint=function(t){var e,n,o,i,r,a,s,l,p=!1;if(!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;s>i;i++)for(e=this._parts[i],r=0,l=e.length,a=l-1;l>r;a=r++)n=e[r],o=e[a],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(p=!p);return p||u.Polyline.prototype._containsPoint.call(this,t,!0)},u.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},u.GeoJSON=u.FeatureGroup.extend({initialize:function(t,e){u.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,o,i=u.Util.isArray(t)?t:t.features;if(i){for(e=0,n=i.length;n>e;e++)o=i[e],(o.geometries||o.geometry||o.features||o.coordinates)&&this.addData(o);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=u.GeoJSON.geometryToLayer(t,r);return a?(a.feature=u.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=u.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),u.extend(u.GeoJSON,{geometryToLayer:function(t,e){var n,o,i,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],p=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),p?p(t,n):new u.Marker(n);case"MultiPoint":for(i=0,r=s.length;r>i;i++)n=c(s[i]),l.push(p?p(t,n):new u.Marker(n));return new u.FeatureGroup(l);case"LineString":case"MultiLineString":return o=this.coordsToLatLngs(s,"LineString"===a.type?0:1,c),new u.Polyline(o,e);case"Polygon":case"MultiPolygon":return o=this.coordsToLatLngs(s,"Polygon"===a.type?1:2,c),new u.Polygon(o,e);case"GeometryCollection":for(i=0,r=a.geometries.length;r>i;i++){var d=this.geometryToLayer({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new u.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new u.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,n){for(var o,i=[],r=0,a=t.length;a>r;r++)o=e?this.coordsToLatLngs(t[r],e-1,n):(n||this.coordsToLatLng)(t[r]),i.push(o);return i},latLngToCoords:function(t){return t.alt!==s?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,n){for(var o=[],i=0,r=t.length;r>i;i++)o.push(e?u.GeoJSON.latLngsToCoords(t[i],e-1,n):u.GeoJSON.latLngToCoords(t[i]));return!e&&n&&o.push(o[0]),o},getFeature:function(t,e){return t.feature?u.extend({},t.feature,{geometry:e}):u.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{
type:"Feature",properties:{},geometry:t}}});var c={toGeoJSON:function(){return u.GeoJSON.getFeature(this,{type:"Point",coordinates:u.GeoJSON.latLngToCoords(this.getLatLng())})}};u.Marker.include(c),u.Circle.include(c),u.CircleMarker.include(c),u.Polyline.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=u.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return u.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},u.Polygon.prototype.toGeoJSON=function(){var t=!u.Polyline._flat(this._latlngs),e=t&&!u.Polyline._flat(this._latlngs[0]),n=u.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(n=[n]),u.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})},u.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),u.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,n=[];return this.eachLayer(function(t){if(t.toGeoJSON){var o=t.toGeoJSON();n.push(e?o.geometry:u.GeoJSON.asFeature(o))}}),e?u.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}}),u.geoJSON=function(t,e){return new u.GeoJSON(t,e)},u.geoJson=u.geoJSON;var d="_leaflet_events";u.DomEvent={on:function(t,e,n,o){if("object"==typeof e)for(var i in e)this._on(t,i,e[i],n);else{e=u.Util.splitWords(e);for(var r=0,a=e.length;a>r;r++)this._on(t,e[r],n,o)}return this},off:function(t,e,n,o){if("object"==typeof e)for(var i in e)this._off(t,i,e[i],n);else{e=u.Util.splitWords(e);for(var r=0,a=e.length;a>r;r++)this._off(t,e[r],n,o)}return this},_on:function(t,e,n,o){var i=e+u.stamp(n)+(o?"_"+u.stamp(o):"");if(t[d]&&t[d][i])return this;var a=function(e){return n.call(o||t,e||r.event)},s=a;return u.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,a,i):u.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener?this.addDoubleTapListener(t,a,i):"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||r.event,u.DomEvent._isExternalTarget(t,e)&&s(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1)):("click"===e&&u.Browser.android&&(a=function(t){return u.DomEvent._filterClick(t,s)}),t.addEventListener(e,a,!1)):"attachEvent"in t&&t.attachEvent("on"+e,a),t[d]=t[d]||{},t[d][i]=a,this},_off:function(t,e,n,o){var i=e+u.stamp(n)+(o?"_"+u.stamp(o):""),r=t[d]&&t[d][i];return r?(u.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,i):u.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r),t[d][i]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,u.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return u.DomEvent.on(t,"mousewheel",u.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=u.DomEvent.stopPropagation;return u.DomEvent.on(t,u.Draggable.START.join(" "),e),u.DomEvent.on(t,{click:u.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return u.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new u.Point(t.clientX,t.clientY);var n=e.getBoundingClientRect();return new u.Point(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},_wheelPxFactor:u.Browser.win&&u.Browser.chrome?2:u.Browser.gecko?r.devicePixelRatio:1,getWheelDelta:function(t){return t.deltaY&&0===t.deltaMode?-t.deltaY/u.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?18*-t.deltaY:t.deltaY&&2===t.deltaMode?52*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?18*-t.detail:t.detail?t.detail/-32765*52:0},_skipEvents:{},_fakeStop:function(t){u.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(o){return!1}return n!==t},_filterClick:function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,o=u.DomEvent._lastClick&&n-u.DomEvent._lastClick;return o&&o>100&&500>o||t.target._simulatedClick&&!t._simulated?void u.DomEvent.stop(t):(u.DomEvent._lastClick=n,void e(t))}},u.DomEvent.addListener=u.DomEvent.on,u.DomEvent.removeListener=u.DomEvent.off,u.Draggable=u.Evented.extend({options:{clickTolerance:3},statics:{START:u.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,n){this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(u.DomEvent.on(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(u.DomEvent.off(this._dragStartTarget,u.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&(this._moved=!1,!u.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(u.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&this._enabled&&(u.Draggable._dragging=!0,this._preventOutline&&u.DomUtil.preventOutline(this._element),u.DomUtil.disableImageDrag(),u.DomUtil.disableTextSelection(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new u.Point(e.clientX,e.clientY),u.DomEvent.on(a,u.Draggable.MOVE[t.type],this._onMove,this).on(a,u.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new u.Point(e.clientX,e.clientY),o=n.subtract(this._startPoint);(o.x||o.y)&&(Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(u.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=u.DomUtil.getPosition(this._element).subtract(o),u.DomUtil.addClass(a.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,r.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),u.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,u.Util.cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=u.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),u.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){if(!t._simulated){u.DomUtil.removeClass(a.body,"leaflet-dragging"),this._lastTarget&&(u.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var e in u.Draggable.MOVE)u.DomEvent.off(a,u.Draggable.MOVE[e],this._onMove,this).off(a,u.Draggable.END[e],this._onUp,this);u.DomUtil.enableImageDrag(),u.DomUtil.enableTextSelection(),this._moved&&this._moving&&(u.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,u.Draggable._dragging=!1}}}),u.Handler=u.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),u.Map.mergeOptions({dragging:!0,inertia:!u.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),u.Map.Drag=u.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new u.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}u.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-grab"),u.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=u.latLngBounds(this._map.options.maxBounds);this._offsetLimit=u.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,o=this._draggable._newPos.x,i=(o-e+n)%t+e-n,r=(o+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(r+n)?i:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,o=!n.inertia||this._times.length<2;if(e.fire("dragend",t),o)e.fire("moveend");else{var i=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/r),l=s.distanceTo([0,0]),p=Math.min(n.inertiaMaxSpeed,l),c=s.multiplyBy(p/l),d=p/(n.inertiaDeceleration*a),h=c.multiplyBy(-d/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),u.Util.requestAnimFrame(function(){e.panBy(h,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),u.Map.addInitHook("addHandler","dragging",u.Map.Drag),u.Map.mergeOptions({doubleClickZoom:!0}),u.Map.DoubleClickZoom=u.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),o=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-o:n+o;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),u.Map.addInitHook("addHandler","doubleClickZoom",u.Map.DoubleClickZoom),u.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:50}),u.Map.ScrollWheelZoom=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){u.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=u.DomEvent.getWheelDelta(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u.bind(this._performZoom,this),o),u.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var o=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(o))))/Math.LN2,r=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}}),u.Map.addInitHook("addHandler","scrollWheelZoom",u.Map.ScrollWheelZoom),u.extend(u.DomEvent,{_touchstart:u.Browser.msPointer?"MSPointerDown":u.Browser.pointer?"pointerdown":"touchstart",_touchend:u.Browser.msPointer?"MSPointerUp":u.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,n){function o(t){var e;if(e=u.Browser.pointer?u.DomEvent._pointersCount:t.touches.length,!(e>1)){var n=Date.now(),o=n-(r||n);a=t.touches?t.touches[0]:t,s=o>0&&l>=o,r=n}}function i(){if(s&&!a.cancelBubble){if(u.Browser.pointer){var t,n,o={};for(n in a)t=a[n],o[n]=t&&t.bind?t.bind(a):t;a=o}a.type="dblclick",e(a),r=null}}var r,a,s=!1,l=250,p="_leaflet_",c=this._touchstart,d=this._touchend;return t[p+c+n]=o,t[p+d+n]=i,t[p+"dblclick"+n]=e,t.addEventListener(c,o,!1),t.addEventListener(d,i,!1),u.Browser.edge||t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var n="_leaflet_",o=t[n+this._touchstart+e],i=t[n+this._touchend+e],r=t[n+"dblclick"+e];return t.removeEventListener(this._touchstart,o,!1),t.removeEventListener(this._touchend,i,!1),u.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),u.extend(u.DomEvent,{POINTER_DOWN:u.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:u.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:u.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:u.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,n,o){return"touchstart"===e?this._addPointerStart(t,n,o):"touchmove"===e?this._addPointerMove(t,n,o):"touchend"===e&&this._addPointerEnd(t,n,o),this},removePointerListener:function(t,e,n){var o=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,o,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,o,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)),this},_addPointerStart:function(t,e,n){var o=u.bind(function(t){if("mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;u.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=o,t.addEventListener(this.POINTER_DOWN,o,!1),!this._pointerDocListener){var i=u.bind(this._globalPointerUp,this);a.documentElement.addEventListener(this.POINTER_DOWN,u.bind(this._globalPointerDown,this),!0),a.documentElement.addEventListener(this.POINTER_MOVE,u.bind(this._globalPointerMove,this),!0),a.documentElement.addEventListener(this.POINTER_UP,i,!0),a.documentElement.addEventListener(this.POINTER_CANCEL,i,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var n in this._pointers)t.touches.push(this._pointers[n]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,n){var o=u.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1)},_addPointerEnd:function(t,e,n){var o=u.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+n]=o,t.addEventListener(this.POINTER_UP,o,!1),t.addEventListener(this.POINTER_CANCEL,o,!1)}}),u.Map.mergeOptions({touchZoom:u.Browser.touch&&!u.Browser.android23,bounceAtZoomLimits:!0}),u.Map.TouchZoom=u.Handler.extend({addHooks:function(){u.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){u.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),u.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),u.DomEvent.on(a,"touchmove",this._onTouchMove,this).on(a,"touchend",this._onTouchEnd,this),u.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]),i=n.distanceTo(o)/this._startDist;if(this._zoom=e.getScaleZoom(i,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&1>i||this._zoom>e.getMaxZoom()&&i>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===i)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===i&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),u.Util.cancelAnimFrame(this._animRequest);var a=u.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=u.Util.requestAnimFrame(a,this,!0),u.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,u.Util.cancelAnimFrame(this._animRequest),u.DomEvent.off(a,"touchmove",this._onTouchMove).off(a,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.snapZoom):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),u.Map.addInitHook("addHandler","touchZoom",u.Map.TouchZoom),u.Map.mergeOptions({tap:!0,tapTolerance:15}),u.Map.Tap=u.Handler.extend({addHooks:function(){u.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){u.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(u.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new u.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(u.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),u.DomEvent.on(a,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),u.DomEvent.off(a,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&u.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new u.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=a.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,r,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}),u.Browser.touch&&!u.Browser.pointer&&u.Map.addInitHook("addHandler","tap",u.Map.Tap),u.Map.mergeOptions({boxZoom:!0}),u.Map.BoxZoom=u.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){u.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){u.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!t.shiftKey||1!==t.which&&1!==t.button?!1:(this._resetState(),u.DomUtil.disableTextSelection(),u.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void u.DomEvent.on(a,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=u.DomUtil.create("div","leaflet-zoom-box",this._container),u.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new u.Bounds(this._point,this._startPoint),n=e.getSize();u.DomUtil.setPosition(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(u.DomUtil.remove(this._box),u.DomUtil.removeClass(this._container,"leaflet-crosshair")),u.DomUtil.enableTextSelection(),u.DomUtil.enableImageDrag(),u.DomEvent.off(a,{contextmenu:u.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(u.bind(this._resetState,this),0);var e=new u.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),u.Map.addInitHook("addHandler","boxZoom",u.Map.BoxZoom),u.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),u.Map.Keyboard=u.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),u.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),u.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=a.body,e=a.documentElement,n=t.scrollTop||e.scrollTop,o=t.scrollLeft||e.scrollLeft;this._map._container.focus(),r.scrollTo(o,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,o=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;n>e;e++)o[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;n>e;e++)o[i.right[e]]=[t,0];for(e=0,n=i.down.length;n>e;e++)o[i.down[e]]=[0,t];for(e=0,n=i.up.length;n>e;e++)o[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,o=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;n>e;e++)o[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;n>e;e++)o[i.zoomOut[e]]=-t},_addHooks:function(){u.DomEvent.on(a,"keydown",this._onKeyDown,this)},_removeHooks:function(){u.DomEvent.off(a,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,o=this._map;if(n in this._panKeys){if(o._panAnim&&o._panAnim._inProgress)return;e=this._panKeys[n],t.shiftKey&&(e=u.point(e).multiplyBy(3)),o.panBy(e),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds)}else if(n in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n)return;o.closePopup()}u.DomEvent.stop(t)}}}),u.Map.addInitHook("addHandler","keyboard",u.Map.Keyboard),u.Handler.MarkerDrag=u.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new u.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),u.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&u.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,n=e._shadow,o=u.DomUtil.getPosition(e._icon),i=e._map.layerPointToLatLng(o);n&&u.DomUtil.setPosition(n,o),e._latlng=i,t.latlng=i,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),u.Control=u.Class.extend({options:{position:"topright"},initialize:function(t){u.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),o=t._controlCorners[n];return u.DomUtil.addClass(e,"leaflet-control"),-1!==n.indexOf("bottom")?o.insertBefore(e,o.firstChild):o.appendChild(e),this},remove:function(){return this._map?(u.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),u.control=function(t){return new u.Control(t)},u.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,i){var r=n+t+" "+n+i;e[t+i]=u.DomUtil.create("div",r,o)}var e=this._controlCorners={},n="leaflet-",o=this._controlContainer=u.DomUtil.create("div",n+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){u.DomUtil.remove(this._controlContainer)}}),u.Control.Zoom=u.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=u.DomUtil.create("div",e+" leaflet-bar"),o=this.options;return this._zoomInButton=this._createButton(o.zoomInText,o.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(o.zoomOutText,o.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){this._disabled||this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){this._disabled||this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,o,i){var r=u.DomUtil.create("a",n,o);return r.innerHTML=t,r.href="#",r.title=e,u.DomEvent.on(r,"mousedown dblclick",u.DomEvent.stopPropagation).on(r,"click",u.DomEvent.stop).on(r,"click",i,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";u.DomUtil.removeClass(this._zoomInButton,e),u.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&u.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&u.DomUtil.addClass(this._zoomInButton,e)}}),u.Map.mergeOptions({zoomControl:!0}),u.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new u.Control.Zoom,this.addControl(this.zoomControl))}),u.control.zoom=function(t){return new u.Control.Zoom(t)},u.Control.Attribution=u.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){u.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=u.DomUtil.create("div","leaflet-control-attribution"),u.DomEvent&&u.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}}),u.Map.mergeOptions({attributionControl:!0}),u.Map.addInitHook(function(){this.options.attributionControl&&(new u.Control.Attribution).addTo(this)}),u.control.attribution=function(t){return new u.Control.Attribution(t)},u.Control.Scale=u.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=u.DomUtil.create("div",e),o=this.options;return this._addScales(o,e+"-line",n),t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=u.DomUtil.create("div",e,n)),t.imperial&&(this._iScale=u.DomUtil.create("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=1e3>e?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,o,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(o=this._getRoundNum(i),this._updateScale(this._iScale,o+" ft",o/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),u.control.scale=function(t){return new u.Control.Scale(t)},u.Control.Layers=u.Control.extend({
options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(t,e,n){u.setOptions(this,n),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var o in t)this._addLayer(t[o],o);for(o in e)this._addLayer(e[o],o,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(u.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){u.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(u.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):u.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return u.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=u.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),u.DomEvent.disableClickPropagation(e),u.Browser.touch||u.DomEvent.disableScrollPropagation(e);var n=this._form=u.DomUtil.create("form",t+"-list");if(this.options.collapsed){u.Browser.android||u.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this);var o=this._layersLink=u.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",u.Browser.touch?u.DomEvent.on(o,"click",u.DomEvent.stop).on(o,"click",this.expand,this):u.DomEvent.on(o,"focus",this.expand,this),u.DomEvent.on(n,"click",function(){setTimeout(u.bind(this._onInputClick,this),0)},this),this._map.on("click",this.collapse,this)}else this.expand();this._baseLayersList=u.DomUtil.create("div",t+"-base",n),this._separator=u.DomUtil.create("div",t+"-separator",n),this._overlaysList=u.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&u.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;u.DomUtil.empty(this._baseLayersList),u.DomUtil.empty(this._overlaysList);var t,e,n,o,i=0;for(n=0;n<this._layers.length;n++)o=this._layers[n],this._addItem(o),e=e||o.overlay,t=t||!o.overlay,i+=o.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(u.stamp(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",o=a.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var e,n=a.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=a.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("leaflet-base-layers",o),e.layerId=u.stamp(t.layer),u.DomEvent.on(e,"click",this._onInputClick,this);var i=a.createElement("span");i.innerHTML=" "+t.name;var r=a.createElement("div");n.appendChild(r),r.appendChild(e),r.appendChild(i);var s=t.overlay?this._overlaysList:this._baseLayersList;return s.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n,o=this._form.getElementsByTagName("input"),i=[],r=[];this._handlingClick=!0;for(var a=o.length-1;a>=0;a--)t=o[a],e=this._getLayer(t.layerId).layer,n=this._map.hasLayer(e),t.checked&&!n?i.push(e):!t.checked&&n&&r.push(e);for(a=0;a<r.length;a++)this._map.removeLayer(r[a]);for(a=0;a<i.length;a++)this._map.addLayer(i[a]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),o=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==s&&o<e.options.minZoom||e.options.maxZoom!==s&&o>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),u.control.layers=function(t,e,n){return new u.Control.Layers(t,e,n)},u.PosAnimation=u.Evented.extend({run:function(t,e,n,o){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(o||.5,.2),this._startPos=u.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=u.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;n>e?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),u.DomUtil.setPosition(this._el,n),this.fire("step")},_complete:function(){u.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),u.Map.include({setView:function(t,e,n){if(e=e===s?this._zoom:this._limitZoom(e),t=this._limitCenter(u.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==s&&(n.zoom=u.extend({animate:n.animate},n.zoom),n.pan=u.extend({animate:n.animate,duration:n.duration},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=u.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new u.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){u.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){u.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(n)?(this.panBy(n,e),!0):!1}}),u.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var h=u.DomUtil.TRANSITION&&u.Browser.any3d&&!u.Browser.mobileOpera;h&&u.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),u.DomEvent.on(this._proxy,u.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),u.Map.include(h?{_createAnimProxy:function(){var t=this._proxy=u.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=u.DomUtil.TRANSFORM,o=t.style[n];u.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),o===t.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),n=this.getZoom();u.DomUtil.setTransform(t,this.project(e,n),this.getZoomScale(n,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var o=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/o);return n.animate===!0||this.getSize().contains(i)?(u.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0):!1},_animateZoom:function(t,e,n,o){n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,u.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:o}),setTimeout(u.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(u.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),u.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}:{}),u.Map.include({flyTo:function(t,e,n){function o(t){var e=t?-1:1,n=t?g:_,o=g*g-_*_+e*b*b*v*v,i=2*n*b*v,r=o/i,a=Math.sqrt(r*r+1)-r,s=1e-9>a?-18:Math.log(a);return s}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return i(t)/r(t)}function l(t){return _*(r(P)/r(P+w*t))}function p(t){return _*(r(P)*a(P+w*t)-i(P))/b}function c(t){return 1-Math.pow(1-t,1.5)}function d(){var n=(Date.now()-S)/O,o=c(n)*L;1>=n?(this._flyToFrame=u.Util.requestAnimFrame(d,this),this._move(this.unproject(h.add(f.subtract(h).multiplyBy(p(o)/v)),y),this.getScaleZoom(_/l(o),y),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!u.Browser.any3d)return this.setView(t,e,n);this._stop();var h=this.project(this.getCenter()),f=this.project(t),m=this.getSize(),y=this._zoom;t=u.latLng(t),e=e===s?y:e;var _=Math.max(m.x,m.y),g=_*this.getZoomScale(y,e),v=f.distanceTo(h)||1,w=1.42,b=w*w,P=o(0),S=Date.now(),L=(o(1)-P)/w,O=n.duration?1e3*n.duration:1e3*L*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)}}),u.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(t){if(t=this._locateOptions=u.extend({},this._defaultLocateOptions,t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=u.bind(this._handleGeolocationResponse,this),n=u.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,o=new u.LatLng(e,n),i=o.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(i);this.setView(o,r.maxZoom?Math.min(a,r.maxZoom):a)}var s={latlng:o,bounds:i,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)}})}(window,document)},349:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),r=n(247),a=n(35),s=o(a),l=n(48),u=o(l),p=n(58),c=o(p),d=n(47),h=o(d),f=(0,i.combineReducers)({data:s.default,routing:r.routerReducer,map:u.default,scenario:c.default,config:h.default});e.default=f,t.exports=e.default},402:function(t,e){},403:402,404:402,405:402,406:402,407:402,408:402,409:402,410:402,411:402,412:402,413:402,414:402,415:402,416:402,417:402});
//# sourceMappingURL=app.js.map